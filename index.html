<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProvIDe - Bank-Verified Digital Identity Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            50:'#fafafa',100:'#f4f4f5',200:'#e4e4e7',300:'#d4d4d8',
                            400:'#a1a1aa',500:'#71717a',600:'#52525b',700:'#3f3f46',
                            800:'#27272a',900:'#09090b'
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Sora', system-ui, sans-serif;
        }
        .nav-link {
            transition: color 0.15s ease;
            color: #a1a1aa;
        }
        .nav-link:hover {
            color: #fafafa;
        }
        .nav-link.active {
            color: #fafafa;
        }
        section {
            scroll-margin-top: 80px;
        }
        @media (max-width: 768px) {
            section {
                scroll-margin-top: 60px;
            }
        }
        /* Mermaid styling */
        .mermaid {
            background: transparent !important;
        }
        .mermaid .node rect,
        .mermaid .node circle,
        .mermaid .node ellipse,
        .mermaid .node polygon {
            rx: 6;
            ry: 6;
        }
        .mermaid .edgePath .path {
            stroke-width: 1.5px;
        }
        .mermaid .edgeLabel {
            background-color: rgba(9, 9, 11, 0.95) !important;
            border-radius: 4px;
            padding: 3px 6px;
        }
        /* Mockup responsive styles */
        .mockup-container {
            overflow-x: auto;
        }
        @media (max-width: 640px) {
            .mockup-container {
                padding: 1rem;
            }
        }
        /* Fullscreen navigation styles */
        #fullscreen-wrapper {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        #fullscreen-wrapper:active {
            cursor: grabbing !important;
        }
        #fullscreen-diagram {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        /* Animation for loading dots */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-fade-in {
            opacity: 1;
        }
        /* Flat design - no shadows */
        .shadow-3d, .shadow-3d-lg, .shadow-3d-xl {
            box-shadow: none;
        }
        /* Subtle hover */
        .hover-lift {
            transition: border-color 0.2s ease;
        }
        .hover-lift:hover {
            border-color: #3f3f46;
        }
        /* Flat card */
        .card-3d {
            background: rgba(24, 24, 27, 0.4);
            border: 1px solid rgba(39, 39, 42, 0.8);
        }
        /* Flat icon container */
        .icon-3d {
            background: rgba(161, 161, 170, 0.08);
            box-shadow: none;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100">
    
    <!-- Navigation Bar -->
    <nav id="navbar" class="fixed top-0 left-0 right-0 z-50 bg-slate-900/80 backdrop-blur-md border-b border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-14">
                <!-- Logo -->
                <a href="#home" class="flex items-center gap-2.5">
                    <div class="bg-slate-800 border border-slate-700 w-8 h-8 rounded-lg flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <span class="text-base font-semibold tracking-tight text-white">
                        Prov<span class="text-sky-400">ID</span>e
                    </span>
                </a>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center gap-4">
                    <a href="#project-description" class="nav-link text-sm font-medium">Overview</a>
                    <a href="#related-work" class="nav-link text-sm font-medium">Research</a>
                    <a href="#functional-description" class="nav-link text-sm font-medium">Requirements</a>
                    <a href="#use-cases" class="nav-link text-sm font-medium">Use Cases</a>
                    <a href="#architecture" class="nav-link text-sm font-medium">Architecture</a>
                    <a href="#work-plan" class="nav-link text-sm font-medium">Work Plan</a>
                    <a href="#poc" class="nav-link text-sm font-medium">POC</a>
                    <a href="#client-side" class="nav-link text-sm font-medium">Client Side</a>
                    <a href="#server-side" class="nav-link text-sm font-medium">Server Side</a>
                    <a href="#references" class="nav-link text-sm font-medium">References</a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-slate-300 hover:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden border-t border-slate-800 bg-slate-900/98">
            <div class="px-4 py-4 space-y-3">
                <a href="#project-description" class="block nav-link text-sm font-medium py-2">Overview</a>
                <a href="#related-work" class="block nav-link text-sm font-medium py-2">Research</a>
                <a href="#functional-description" class="block nav-link text-sm font-medium py-2">Requirements</a>
                <a href="#use-cases" class="block nav-link text-sm font-medium py-2">Use Cases</a>
                <a href="#architecture" class="block nav-link text-sm font-medium py-2">Architecture</a>
                <a href="#work-plan" class="block nav-link text-sm font-medium py-2">Work Plan</a>
                <a href="#poc" class="block nav-link text-sm font-medium py-2">POC</a>
                <a href="#client-side" class="block nav-link text-sm font-medium py-2">Client Side</a>
                <a href="#server-side" class="block nav-link text-sm font-medium py-2">Server Side</a>
                <a href="#references" class="block nav-link text-sm font-medium py-2">References</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-16">
        <!-- Header Section -->
        <section id="home" class="min-h-screen flex items-center justify-center bg-slate-900 relative overflow-hidden">
            <!-- Subtle background pattern -->
            <div class="absolute inset-0 opacity-[0.02]">
                <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0); background-size: 32px 32px;"></div>
            </div>
            
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center py-20 relative z-10">
                <div class="flex items-center justify-center gap-4 mb-8 animate-fade-in">
                    <div class="bg-slate-800 border border-slate-700 w-16 h-16 rounded-2xl flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-semibold tracking-tight text-white">
                        Prov<span class="text-sky-400">ID</span>e
                    </h1>
                </div>

                <p class="text-2xl md:text-3xl font-semibold text-slate-100 mb-6 leading-tight">
                    Bank-Verified Digital Identity Platform
                </p>
                <p class="text-lg md:text-xl text-slate-400 mb-4 max-w-3xl mx-auto leading-relaxed">
                    Eliminate document uploads. Enable instant identity verification through trusted banking infrastructure.
                </p>
                <p class="text-base text-slate-500 mb-12 max-w-2xl mx-auto">
                    Secure, compliant, and frictionless identity verification powered by OAuth 2.0 and Open Banking standards
                </p>
                
                <!-- Key Value Propositions -->
                <div class="grid md:grid-cols-3 gap-6 mb-12 max-w-4xl mx-auto">
                    <div class="card-3d rounded-xl p-6 shadow-3d hover-lift transition-all duration-300">
                        <div class="w-12 h-12 bg-slate-500/10 rounded-lg flex items-center justify-center mb-4 mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                        <h3 class="text-white font-semibold mb-2">Bank-Level Security</h3>
                        <p class="text-slate-400 text-sm">Leverage existing bank KYC verification without storing sensitive documents</p>
                    </div>
                    <div class="card-3d rounded-xl p-6 shadow-3d hover-lift transition-all duration-300">
                        <div class="w-12 h-12 bg-slate-500/10 rounded-lg flex items-center justify-center mb-4 mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <h3 class="text-white font-semibold mb-2">Zero Friction</h3>
                        <p class="text-slate-400 text-sm">Instant verification eliminates document uploads and reduces abandonment</p>
                    </div>
                    <div class="card-3d rounded-xl p-6 shadow-3d hover-lift transition-all duration-300">
                        <div class="w-12 h-12 bg-slate-500/10 rounded-lg flex items-center justify-center mb-4 mx-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <h3 class="text-white font-semibold mb-2">Regulatory Compliance</h3>
                        <p class="text-slate-400 text-sm">Built on OAuth 2.0 and OpenID Connect standards for enterprise use</p>
                    </div>
                </div>
                
                <div class="mt-12 space-y-4 text-left max-w-2xl mx-auto">
                    <div class="card-3d rounded-xl p-6 shadow-3d">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs text-slate-400 mb-1 uppercase tracking-wider">By</p>
                                <div class="space-y-1">
                                    <p class="text-slate-200 font-medium">Amit Zamir</p>
                                    <p class="text-slate-200 font-medium">Noa Almakais</p>
                                    <p class="text-slate-200 font-medium">May Gorvitz</p>
                                    <p class="text-slate-200 font-medium">Hai Tal</p>
                                </div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                        </div>
                    </div>
                    <div class="card-3d rounded-xl p-6 shadow-3d">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs text-slate-400 mb-1 uppercase tracking-wider">Supervisor</p>
                                <p class="text-slate-200 font-medium">Ari Ben Ephraim</p>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                    </div>
                    <div class="card-3d rounded-xl p-6 shadow-3d">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs text-slate-400 mb-1 uppercase tracking-wider">Repository</p>
                                <a href="https://github.com/Amit-Za/provide.git" target="_blank" class="text-sky-400 hover:text-sky-300 font-medium transition-colors inline-flex items-center gap-2">
                                    View on GitHub
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                    </svg>
                                </a>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Project Description -->
        <section id="project-description" class="py-24 px-4 sm:px-6 lg:px-8">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Overview</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">1. Project Description</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                </div>
                <div class="space-y-8 text-slate-300 leading-relaxed">
                    <div class="card-3d rounded-2xl p-8 shadow-3d-lg">
                        <p class="text-xl text-white font-semibold mb-4">
                            ProvIDe is a next-generation digital identity infrastructure that revolutionizes how third-party platforms verify user identity.
                        </p>
                        <p class="text-lg leading-relaxed">
                            Instead of requiring users to upload identity documents - a process that introduces friction, security risks, and regulatory complexity - ProvIDe leverages the user's existing bank relationship as a trusted identity anchor. The platform securely delegates authentication to regulated banks via <strong class="text-slate-200">OpenFinance.ai</strong> and returns cryptographically signed identity assertions that meet enterprise security and compliance standards.
                        </p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6 mt-8">
                        <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-3d hover-lift">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                    </svg>
                                </div>
                                <h3 class="text-base font-medium text-slate-200">The Problem</h3>
                            </div>
                            <ul class="space-y-3 text-slate-300">
                                <li class="flex items-start gap-2">
                                    <span class="text-slate-500 mt-1">•</span>
                                    <span><strong class="text-white">High Friction:</strong> Document-based KYC causes 30-40% user abandonment</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-slate-500 mt-1">•</span>
                                    <span><strong class="text-white">Security Risk:</strong> Storing identity documents creates breach liability</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-slate-500 mt-1">•</span>
                                    <span><strong class="text-white">Redundant Verification:</strong> Users verify identity repeatedly across services</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-slate-500 mt-1">•</span>
                                    <span><strong class="text-white">Insufficient Alternatives:</strong> Social login lacks legal assurance for regulated use</span>
                                </li>
                        </ul>
                    </div>

                        <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-3d hover-lift">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <h3 class="text-base font-medium text-slate-200">The Solution</h3>
                            </div>
                            <p class="text-slate-300 mb-4">
                                ProvIDe bridges the gap between bank-level identity verification and third-party service needs, enabling instant, secure identity verification without document storage.
                            </p>
                            <div class="space-y-2 text-slate-300">
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 mt-1">✓</span>
                                    <span><strong class="text-white">Identity Verification Mode:</strong> One-time or ongoing verification with cryptographically signed assertions</span>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 mt-1">✓</span>
                                    <span><strong class="text-white">OAuth IdP Mode:</strong> Full OAuth 2.0 / OpenID Connect provider for seamless third-party login</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card-3d rounded-xl p-8 shadow-3d-lg mt-8">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-medium text-slate-100">Market Positioning</h3>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="space-y-3">
                                <h4 class="text-lg font-semibold text-slate-200 mb-3">Current Market Gaps</h4>
                                <ul class="space-y-2 text-slate-300">
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-1">•</span>
                                        <span><strong class="text-white">Open Banking:</strong> Provides account data, not identity verification</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-1">•</span>
                                        <span><strong class="text-white">KYC Vendors:</strong> Focus on document processing, not bank integration</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-1">•</span>
                                        <span><strong class="text-white">Social Login:</strong> Convenient but lacks legal assurance for regulated services</span>
                                    </li>
                        </ul>
                            </div>
                            <div class="space-y-3">
                                <h4 class="text-lg font-semibold text-slate-400 mb-3">ProvIDe Advantage</h4>
                                <ul class="space-y-2 text-slate-300">
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-1">✓</span>
                                        <span>Leverages existing bank KYC infrastructure</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-1">✓</span>
                                        <span>No document storage or processing required</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-1">✓</span>
                                        <span>Bank-level security with enterprise compliance</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-1">✓</span>
                                        <span>Standard OAuth 2.0 / OpenID Connect integration</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="mt-6 pt-6 border-t border-slate-700">
                            <p class="text-slate-300">
                                <strong class="text-white">Bank Integration:</strong> Secure connectivity via <strong class="text-slate-200">OpenFinance.ai</strong>, enabling seamless integration with regulated banking infrastructure while maintaining strict security and compliance standards.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Related Work -->
        <section id="related-work" class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-800/30">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Research</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">2. Related Work</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                </div>
                <div class="space-y-6 text-slate-300 leading-relaxed">
                    <p>
                        Today, digital services that require identity verification rely primarily on classic KYC processes, which include uploading identification documents, taking selfies, and manual or automatic verification. These processes are characterized by high friction, complex user experience, and significant risks related to storing sensitive documents and fraud.
                    </p>
                    <p>
                        In parallel, there are Open Banking / Open Finance solutions that allow access to the user's financial data, but these solutions do not serve as identity providers and do not provide official confirmation of the user's identity to a third party. Banks, despite being the entity that performed the strictest identification, do not currently serve as digital identity providers for external services.
                    </p>
                    <p>
                        As a result, many organizations continue to require uploading physical documents, even when it would be possible to rely on an identity that has already been verified at the banking level.
                    </p>
                    <div class="mt-8 bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                        <h3 class="text-base font-medium text-slate-200 mb-4">Current Solutions & Limitations</h3>
                        <ul class="space-y-3 list-disc list-inside text-slate-300">
                            <li><strong class="text-white">Traditional KYC Providers:</strong> Rely on document upload and biometrics, introducing high friction and security risks</li>
                            <li><strong class="text-white">Open Banking Platforms:</strong> Expose financial data but do not provide identity assurance or verification services</li>
                            <li><strong class="text-white">Global Identity Providers (Social Login):</strong> Convenient but not suitable for regulated use cases requiring legal assurance</li>
                            <li><strong class="text-white">Bank Identity Gap:</strong> Banks perform strictest verification but don't serve as identity providers for external services</li>
                        </ul>
                    </div>
                    
                    <div class="mt-8 bg-slate-800/50 rounded-lg p-6 border border-slate-700">
                        <h3 class="text-base font-medium text-slate-200 mb-4">Technical Foundation</h3>
                        <p class="text-slate-300 mb-3">
                            The platform is built on industry-standard protocols and technologies:
                        </p>
                        <ul class="space-y-2 text-slate-300 list-disc list-inside">
                            <li><strong class="text-white">OAuth 2.0:</strong> Authorization framework for secure authentication flows</li>
                            <li><strong class="text-white">OpenID Connect:</strong> Identity layer on top of OAuth 2.0 for identity verification</li>
                            <li><strong class="text-white">JWT (JSON Web Token):</strong> Cryptographically signed identity assertions</li>
                            <li><strong class="text-white">JWS (JSON Web Signature):</strong> Digital signatures for token integrity</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Functional Description / Requirements -->
        <section id="functional-description" class="py-24 px-4 sm:px-6 lg:px-8">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Specifications</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">3. Functional Description / Requirements</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                </div>
                
                <div class="space-y-8">
                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-4">General System Description</h3>
                        <div class="space-y-4 text-slate-300 leading-relaxed">
                            <p>
                                Third-party platforms integrate a standard login or verification flow. Users authenticate via their bank using Strong Customer Authentication (SCA). The platform receives confirmation and issues a signed identity token containing only the claims the platform is authorized to receive.
                            </p>
                            <p>
                                A digital service integrates an authentication button of the platform - "Identity Verification via Bank" or "Login / Verify with Bank" - into the user interface. After clicking the button, the user is redirected to an authentication process with their bank through a secure redirect via OpenFinance.ai.
                            </p>
                            <p>
                                During authentication, the bank performs strong verification using existing means (password, OTP, biometrics), and after user approval, returns a digital identity confirmation (Identity Assertion) to the system. This confirmation includes verified identity details as needed, such as name match, ID number, age, or country, without transferring documents or financial data.
                            </p>
                            <p>
                                The system provides the digital service with a reliable indication of the user's identity, which can be used one-time or continuously, according to the service's policy.
                            </p>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-6">Core Use Cases</h3>
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift group">
                                <div class="w-12 h-12 bg-slate-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-slate-500/15 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <h4 class="text-base font-medium text-slate-200 mb-3">Loan & Financial Services</h4>
                                <p class="text-slate-300 leading-relaxed">
                                    Eliminate document uploads and selfie verification. Enable instant account creation with bank-verified identity for loans, credit applications, and financial products.
                                </p>
                            </div>
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift group">
                                <div class="w-12 h-12 bg-slate-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-slate-500/15 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                                    </svg>
                                </div>
                                <h4 class="text-base font-medium text-slate-200 mb-3">E-commerce & Trading</h4>
                                <p class="text-slate-300 leading-relaxed">
                                    Verify customers and sellers instantly. Reduce identity fraud, enable verified account creation, and streamline onboarding for trading platforms and marketplaces.
                                </p>
                            </div>
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift group">
                                <div class="w-12 h-12 bg-slate-500/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-slate-500/15 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-slate-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                    </svg>
                                </div>
                                <h4 class="text-base font-medium text-slate-200 mb-3">Regulated Services</h4>
                                <p class="text-slate-300 leading-relaxed">
                                    Insurance, cryptocurrency platforms, age-restricted services, and highly regulated industries requiring verified identity with legal assurance.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Detailed Functional Requirements</h3>
                        <ul class="space-y-3 text-slate-300 list-disc list-inside">
                            <li><strong class="text-white">Third-party platform registration and approval:</strong> Services must register and be approved before accessing the platform</li>
                            <li><strong class="text-white">OAuth authorization and token issuance:</strong> Secure OAuth 2.0 Authorization Code Flow for bank authentication</li>
                            <li><strong class="text-white">Explicit user consent with clear scope definition:</strong> Users must explicitly consent to attribute sharing with clear visibility of what is being shared</li>
                            <li><strong class="text-white">Policy-based attribute disclosure:</strong> Configurable identity attributes (name, ID, age, country) based on service needs and user consent</li>
                            <li><strong class="text-white">Time-limited and revocable identity assertions:</strong> Identity tokens have expiration and can be revoked by users</li>
                            <li><strong class="text-white">Identity assertion generation and validation:</strong> Cryptographically signed JWT tokens containing verified identity claims</li>
                            <li><strong class="text-white">Token management and lifecycle handling:</strong> Secure storage, refresh, and revocation of tokens</li>
                            <li><strong class="text-white">Audit logging for compliance and security:</strong> Comprehensive logging of all identity verification events</li>
                            <li><strong class="text-white">OpenFinance.ai integration:</strong> Bank connectivity via OpenFinance.ai for secure banking infrastructure access</li>
                            <li><strong class="text-white">RTL (Right-to-Left) UI support:</strong> Hebrew interface support for consent screens and user interactions</li>
                            <li><strong class="text-white">Responsive design:</strong> Mobile and desktop device optimization</li>
                            <li><strong class="text-white">No storage of sensitive data:</strong> No storage of identification documents or bank login credentials</li>
                            <li><strong class="text-white">Dual mode operation:</strong> Support for both identity verification mode and Identity Provider (IdP) mode</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Detailed Use Cases -->
        <section id="use-cases" class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-800/30">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Scenarios</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">4. Use Cases</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                    <p class="text-lg text-slate-400 mt-4 max-w-3xl">
                        Detailed scenarios covering the main user journeys, edge cases, and action paths within the ProvIDe platform.
                    </p>
                </div>

                <div class="space-y-8">
                    <!-- UC-1: New User Identity Verification -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-400 font-bold text-lg">1</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-1: New User Identity Verification</h3>
                                <p class="text-sm text-slate-400">Primary flow — First-time bank-verified identity</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-3 gap-4 mb-6 text-sm">
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Actor</p>
                                <p class="text-white font-medium">End User</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Precondition</p>
                                <p class="text-white font-medium">Active bank account at a supported bank</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Postcondition</p>
                                <p class="text-white font-medium">Signed identity assertion issued to service</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Main Flow (Happy Path)</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li>User visits a third-party service and clicks <strong class="text-white">"Verify Identity via Bank"</strong></li>
                                <li>Service redirects user to ProvIDe OAuth authorization endpoint with requested scopes (e.g., <code class="text-slate-400">name</code>, <code class="text-slate-400">age</code>, <code class="text-slate-400">country</code>)</li>
                                <li>ProvIDe validates the service's <code class="text-slate-400">client_id</code>, <code class="text-slate-400">redirect_uri</code>, and requested scopes</li>
                                <li>User is presented with bank selection screen showing supported banks</li>
                                <li>User selects their bank and is redirected to the bank's authentication page via OpenFinance.ai</li>
                                <li>User authenticates with Strong Customer Authentication (SCA): password + OTP/biometrics</li>
                                <li>Bank verifies user identity and returns confirmation to ProvIDe via OpenFinance.ai callback</li>
                                <li>ProvIDe displays consent screen showing exactly which attributes will be shared</li>
                                <li>User reviews and approves the consent request</li>
                                <li>ProvIDe generates a cryptographically signed JWT identity assertion</li>
                                <li>User is redirected back to the service with an authorization code</li>
                                <li>Service exchanges the authorization code for access token and ID token</li>
                                <li>Service receives verified identity attributes — account is created/verified</li>
                            </ol>
                            <h4 class="text-lg font-semibold text-slate-300 mt-6">Alternative Flows</h4>
                            <div class="space-y-3 text-sm text-slate-300">
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <p class="font-semibold text-white mb-1">4a. Invalid Service Credentials</p>
                                    <p>If <code class="text-slate-400">client_id</code> or <code class="text-slate-400">redirect_uri</code> is invalid, user is shown an error page. Event is logged to audit system.</p>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <p class="font-semibold text-white mb-1">6a. Bank Authentication Fails</p>
                                    <p>If user enters incorrect credentials, the bank handles retry logic. After max attempts, bank redirects back with an error. ProvIDe shows a user-friendly error with "Try Again" option.</p>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <p class="font-semibold text-white mb-1">9a. User Denies Consent</p>
                                    <p>If user clicks "Cancel" on the consent screen, ProvIDe redirects back to service with <code class="text-slate-400">error=access_denied</code>. No data is shared. Event is logged.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- UC-2: Returning User Re-authentication -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-300 font-bold text-lg">2</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-2: Returning User Re-authentication</h3>
                                <p class="text-sm text-slate-400">Streamlined flow — Previously verified user</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-3 gap-4 mb-6 text-sm">
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Actor</p>
                                <p class="text-white font-medium">Previously verified user</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Precondition</p>
                                <p class="text-white font-medium">Existing verification record with active consent</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Postcondition</p>
                                <p class="text-white font-medium">New token issued using existing consent</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Main Flow</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li>User returns to a service where they previously verified identity</li>
                                <li>Service redirects user to ProvIDe OAuth endpoint with same scopes</li>
                                <li>ProvIDe detects existing active consent for this user-service pair</li>
                                <li>User is redirected to bank for re-authentication (SCA required each session)</li>
                                <li>Bank confirms identity; ProvIDe refreshes verification timestamp</li>
                                <li>ProvIDe skips consent screen (consent already granted for requested scopes)</li>
                                <li>New authorization code issued; user redirected to service</li>
                                <li>Service exchanges code for fresh tokens</li>
                            </ol>
                            <h4 class="text-lg font-semibold text-slate-300 mt-6">Alternative Flows</h4>
                            <div class="space-y-3 text-sm text-slate-300">
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <p class="font-semibold text-white mb-1">3a. Consent Expired</p>
                                    <p>If the previous consent has expired, user is shown the consent screen again to re-authorize.</p>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <p class="font-semibold text-white mb-1">3b. Service Requests Additional Scopes</p>
                                    <p>If the service now requests additional attributes beyond the original consent, user is shown an incremental consent screen for the new scopes only.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- UC-3: Consent Revocation -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-400 font-bold text-lg">3</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-3: Consent Revocation</h3>
                                <p class="text-sm text-slate-400">User withdraws data sharing consent</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Main Flow</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li>User accesses the ProvIDe verification dashboard (or service's settings page)</li>
                                <li>Dashboard displays all active consent grants with service names and shared attributes</li>
                                <li>User selects a service and clicks <strong class="text-white">"Revoke Access"</strong></li>
                                <li>ProvIDe displays confirmation dialog showing what will happen upon revocation</li>
                                <li>User confirms revocation</li>
                                <li>ProvIDe sets <code class="text-slate-400">consent_revoked_at</code> timestamp on the authorization record</li>
                                <li>All active tokens for this user-service pair are revoked immediately</li>
                                <li>Token revocation event broadcast via RabbitMQ to all services</li>
                                <li>Audit log entry created with revocation details</li>
                                <li>Service is notified and can no longer access user's identity assertions</li>
                            </ol>
                        </div>
                    </div>

                    <!-- UC-4: Service Registration -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-300 font-bold text-lg">4</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-4: Third-Party Service Registration</h3>
                                <p class="text-sm text-slate-400">Service developer onboarding and integration</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Main Flow</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li>Service developer registers on the ProvIDe developer portal</li>
                                <li>Developer provides: service name, website URL, redirect URIs, required scopes justification</li>
                                <li>ProvIDe admin reviews and approves the registration request</li>
                                <li>Upon approval, ProvIDe generates <code class="text-slate-400">client_id</code> and <code class="text-slate-400">client_secret</code></li>
                                <li>Developer receives credentials and integration documentation</li>
                                <li>Developer integrates the ProvIDe authentication button into their service</li>
                                <li>Developer tests the integration in sandbox environment</li>
                                <li>Service goes live after successful testing</li>
                            </ol>
                        </div>
                    </div>

                    <!-- UC-5: Connection Failure & Recovery -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-500 font-bold text-lg">5</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-5: Connection Failure & Recovery</h3>
                                <p class="text-sm text-slate-400">Handling bank connectivity issues and errors</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Failure Scenarios</h4>
                            <div class="space-y-4">
                                <div class="bg-slate-900/50 rounded-lg p-5 border border-slate-700">
                                    <h5 class="text-white font-semibold mb-2">Scenario A: Bank Service Unavailable</h5>
                                    <ol class="space-y-2 text-slate-300 text-sm list-decimal list-inside">
                                        <li>User selects their bank during identity verification</li>
                                        <li>ProvIDe attempts to connect to bank via OpenFinance.ai</li>
                                        <li>Connection fails (bank server down, maintenance, network issue)</li>
                                        <li>ProvIDe logs the failure with timestamp, bank ID, error code, and correlation ID</li>
                                        <li>Circuit breaker activates if failure rate exceeds threshold</li>
                                        <li>User is shown a clear error message: <em class="text-slate-400">"Your bank is temporarily unavailable. Please try again later or select a different bank."</em></li>
                                        <li>User can retry or choose an alternative bank</li>
                                    </ol>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-5 border border-slate-700">
                                    <h5 class="text-white font-semibold mb-2">Scenario B: Timeout During Bank Authentication</h5>
                                    <ol class="space-y-2 text-slate-300 text-sm list-decimal list-inside">
                                        <li>User is redirected to bank login page</li>
                                        <li>User takes too long or the bank session expires (configurable timeout: 5 minutes)</li>
                                        <li>Bank returns timeout error to OpenFinance.ai callback</li>
                                        <li>ProvIDe receives timeout callback, logs the event</li>
                                        <li>User is shown a timeout message with option to restart the process</li>
                                        <li>No partial data is stored; session state is cleaned up</li>
                                    </ol>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-5 border border-slate-700">
                                    <h5 class="text-white font-semibold mb-2">Scenario C: OpenFinance.ai Callback Failure</h5>
                                    <ol class="space-y-2 text-slate-300 text-sm list-decimal list-inside">
                                        <li>Bank successfully authenticates user</li>
                                        <li>OpenFinance.ai callback to ProvIDe fails (network issue, ProvIDe server error)</li>
                                        <li>OpenFinance.ai retries callback up to 3 times with exponential backoff</li>
                                        <li>If all retries fail, event is queued in dead-letter queue for manual review</li>
                                        <li>User is shown an error with instructions to try again</li>
                                        <li>ProvIDe support team is alerted via monitoring system</li>
                                    </ol>
                                </div>
                            </div>
                            <h4 class="text-lg font-semibold text-slate-200 mt-6">Responsibility Matrix</h4>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-slate-300 mt-3">
                                    <thead class="text-xs text-slate-400 border-b border-slate-700">
                                        <tr>
                                            <th class="px-3 py-2 text-left">Failure Type</th>
                                            <th class="px-3 py-2 text-left">Responsibility</th>
                                            <th class="px-3 py-2 text-left">ProvIDe Action</th>
                                            <th class="px-3 py-2 text-left">Monitoring</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-700">
                                        <tr>
                                            <td class="px-3 py-2">Bank authentication failure</td>
                                            <td class="px-3 py-2 text-slate-300">Bank</td>
                                            <td class="px-3 py-2">Show error, log event, offer retry</td>
                                            <td class="px-3 py-2">Failure rate per bank</td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 py-2">Bank service unavailable</td>
                                            <td class="px-3 py-2 text-slate-300">Bank / OpenFinance</td>
                                            <td class="px-3 py-2">Circuit breaker, suggest alternative bank</td>
                                            <td class="px-3 py-2">Health check, uptime monitoring</td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 py-2">OpenFinance.ai API error</td>
                                            <td class="px-3 py-2 text-slate-300">OpenFinance.ai</td>
                                            <td class="px-3 py-2">Retry with backoff, alert ops team</td>
                                            <td class="px-3 py-2">API response time, error rates</td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 py-2">ProvIDe internal error</td>
                                            <td class="px-3 py-2 text-sky-400">ProvIDe</td>
                                            <td class="px-3 py-2">Graceful error page, auto-recovery</td>
                                            <td class="px-3 py-2">Error logs, health checks</td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 py-2">Network timeout</td>
                                            <td class="px-3 py-2 text-slate-400">Shared</td>
                                            <td class="px-3 py-2">Timeout handling, session cleanup</td>
                                            <td class="px-3 py-2">Latency metrics, timeout counts</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- UC-6: Token Refresh -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-400 font-bold text-lg">6</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-6: Token Refresh & Expiration</h3>
                                <p class="text-sm text-slate-400">Service refreshes expired access tokens</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Main Flow</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li>Service's access token expires (after 15 minutes)</li>
                                <li>Service sends refresh token to ProvIDe token endpoint</li>
                                <li>ProvIDe validates refresh token hash, checks expiration and revocation status</li>
                                <li>If valid: new access token and new refresh token issued (rotation)</li>
                                <li>Old refresh token is invalidated (single-use)</li>
                                <li>If refresh token is expired or revoked: service receives <code class="text-slate-400">error=invalid_grant</code></li>
                                <li>Service must redirect user through full authentication flow again</li>
                            </ol>
                        </div>
                    </div>

                    <!-- UC-7: Verification for Multiple Services -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <span class="text-slate-400 font-bold text-lg">7</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-slate-100">UC-7: Multi-Service Verification</h3>
                                <p class="text-sm text-slate-400">User uses bank identity across multiple services</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Main Flow</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li>User has already verified identity with Service A (e.g., fintech app)</li>
                                <li>User now visits Service B (e.g., trading platform) and initiates verification</li>
                                <li>ProvIDe recognizes the user from previous bank verification</li>
                                <li>User authenticates with bank (SCA required per session)</li>
                                <li>ProvIDe presents consent screen specific to Service B's requested scopes</li>
                                <li>User approves — a separate authorization record is created for Service B</li>
                                <li>Each service has independent consent and tokens; revoking one does not affect the other</li>
                            </ol>
                            <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700 mt-4">
                                <p class="text-sm text-slate-300"><strong class="text-white">Key Principle:</strong> Each service receives only the attributes it requested and the user approved. Service A cannot see Service B's consent or data, and vice versa. This ensures data minimization and scope isolation.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Architecture -->
        <section id="architecture" class="py-24 px-4 sm:px-6 lg:px-8">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">System Design</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">5. Architecture</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                    <p class="text-lg text-slate-400 mt-4 max-w-3xl">
                        Built on industry-standard protocols with a microservices architecture designed for security, scalability, and regulatory compliance.
                    </p>
                </div>
                
                <div class="space-y-8">
                    <div class="text-slate-300 leading-relaxed">
                        <p>
                            The system architecture consists of three main components: the client-side application, the server-side platform, and the bank authentication layer. The architecture follows a microservices approach with clear separation of concerns.
                        </p>
                    </div>

                    <!-- Architecture Diagram -->
                    <div class="card-3d rounded-lg p-8 shadow-3d-lg">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-medium text-slate-100">System Architecture Diagram</h3>
                            <div class="flex items-center gap-2">
                                <button id="zoom-in-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-lg transition-colors text-sm font-medium" title="Zoom In">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7" />
                                    </svg>
                                </button>
                                <button id="zoom-out-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-lg transition-colors text-sm font-medium" title="Zoom Out">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7" />
                                    </svg>
                                </button>
                                <button id="zoom-reset-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-lg transition-colors text-sm font-medium" title="Reset Zoom">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                    </svg>
                                </button>
                                <button id="fullscreen-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium flex items-center gap-2" title="Fullscreen">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                                    </svg>
                                    <span>Fullscreen</span>
                                </button>
                            </div>
                        </div>
                        <div id="diagram-container" class="relative bg-slate-800 rounded-2xl border border-slate-700/50 overflow-hidden shadow-3d-xl">
                            <div id="diagram-wrapper" class="overflow-auto" style="cursor: grab;">
                                <div id="mermaid-diagram" class="mermaid bg-slate-800/50 p-8 rounded-xl" style="font-size: 18px; transform-origin: top left; transition: transform 0.2s; display: inline-block;">
                                    graph LR
                                        User[👤 User]
                                        Client[🖥️ Client App]
                                        ProvIDe[🔐 ProvIDe Platform]
                                        Bank[🏦 Bank<br/>OAuth 2.0]
                                        Services[🌐 Digital Services]
                                        
                                        User -->|1. Request Auth| Client
                                        Client -->|2. OAuth Request| ProvIDe
                                        ProvIDe -->|3. Verify Identity| Bank
                                        Bank -->|4. Identity Confirmed| ProvIDe
                                        ProvIDe -->|5. Return Token| Client
                                        Client -->|6. Access Service| Services
                                        
                                        style User fill:#0f172a,stroke:#f1f5f9,stroke-width:2.5px,color:#fff,stroke-dasharray: 0
                                        style Client fill:#0c4a6e,stroke:#38bdf8,stroke-width:2.5px,color:#fff
                                        style ProvIDe fill:#064e3b,stroke:#10b981,stroke-width:2.5px,color:#fff
                                        style Bank fill:#78350f,stroke:#fbbf24,stroke-width:2.5px,color:#fff
                                        style Services fill:#581c87,stroke:#a78bfa,stroke-width:2.5px,color:#fff
                                </div>
                            </div>
                        </div>
                        <!-- Fullscreen Modal -->
                        <div id="fullscreen-modal" class="hidden fixed inset-0 z-50 bg-slate-900">
                            <div class="absolute top-4 right-4 flex items-center gap-2 z-10">
                                <button id="fs-zoom-in-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-lg transition-colors" title="Zoom In">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7" />
                                    </svg>
                                </button>
                                <button id="fs-zoom-out-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-lg transition-colors" title="Zoom Out">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7" />
                                    </svg>
                                </button>
                                <button id="fs-zoom-reset-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-3 py-2 rounded-lg transition-colors" title="Reset Zoom">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                    </svg>
                                </button>
                                <button id="exit-fullscreen-btn" class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                    <span>Exit Fullscreen</span>
                                </button>
                            </div>
                            <div id="fullscreen-wrapper" class="w-full h-full overflow-hidden" style="cursor: grab; position: relative;">
                                <div id="fullscreen-diagram" class="bg-slate-800/50 p-8 m-auto rounded-xl" style="min-width: 100%; min-height: 100vh; font-size: 24px; transform-origin: 0 0; will-change: transform;">
                                    graph LR
                                        User[👤 User]
                                        Client[🖥️ Client App]
                                        ProvIDe[🔐 ProvIDe Platform]
                                        Bank[🏦 Bank<br/>OAuth 2.0]
                                        Services[🌐 Digital Services]
                                        
                                        User -->|1. Request Auth| Client
                                        Client -->|2. OAuth Request| ProvIDe
                                        ProvIDe -->|3. Verify Identity| Bank
                                        Bank -->|4. Identity Confirmed| ProvIDe
                                        ProvIDe -->|5. Return Token| Client
                                        Client -->|6. Access Service| Services
                                        
                                        style User fill:#0f172a,stroke:#f1f5f9,stroke-width:2.5px,color:#fff,stroke-dasharray: 0
                                        style Client fill:#0c4a6e,stroke:#38bdf8,stroke-width:2.5px,color:#fff
                                        style ProvIDe fill:#064e3b,stroke:#10b981,stroke-width:2.5px,color:#fff
                                        style Bank fill:#78350f,stroke:#fbbf24,stroke-width:2.5px,color:#fff
                                        style Services fill:#581c87,stroke:#a78bfa,stroke-width:2.5px,color:#fff
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 card-3d rounded-xl p-6 shadow-3d">
                            <h4 class="text-sm font-medium text-slate-200 mb-4 flex items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                                Flow Steps
                            </h4>
                            <ol class="space-y-3 text-slate-200 text-sm list-none">
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-500/10 text-slate-300 flex items-center justify-center text-xs font-semibold">1</span>
                                    <span>User requests authentication from Client App</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-500/10 text-slate-300 flex items-center justify-center text-xs font-semibold">2</span>
                                    <span>Client App sends OAuth request to ProvIDe Platform</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-500/10 text-slate-400 flex items-center justify-center text-xs font-semibold">3</span>
                                    <span>ProvIDe redirects to Bank for identity verification</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-500/10 text-slate-300 flex items-center justify-center text-xs font-semibold">4</span>
                                    <span>Bank verifies identity and confirms to ProvIDe</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-500/10 text-slate-400 flex items-center justify-center text-xs font-semibold">5</span>
                                    <span>ProvIDe returns authentication token to Client App</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-500/10 text-slate-400 flex items-center justify-center text-xs font-semibold">6</span>
                                    <span>Client App uses token to access Digital Services</span>
                                </li>
                            </ol>
                        </div>
                    </div>

                    <div class="card-3d rounded-lg p-8 shadow-3d-lg">
                        <h3 class="text-lg font-medium text-slate-100 mb-6">System Components</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-sm font-medium text-slate-300 mb-3">Client Side</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li>• Angular or React framework</li>
                                    <li>• RTL UI support</li>
                                    <li>• OAuth redirect handling</li>
                                    <li>• Responsive design</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-sm font-medium text-slate-300 mb-3">Server Side</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li>• Node.js with Express.js</li>
                                    <li>• PostgreSQL with Prisma ORM</li>
                                    <li>• Redis for caching</li>
                                    <li>• RabbitMQ for async communication</li>
                                    <li>• REST APIs</li>
                                    <li>• Identity management</li>
                                    <li>• Token & permissions</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-sm font-medium text-slate-300 mb-3">Bank Authentication</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li>• OAuth 2.0 Authorization Code Flow</li>
                                    <li>• Open Banking intermediaries</li>
                                    <li>• Secure bank connections</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-sm font-medium text-slate-300 mb-3">Security & Compliance</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li>• Data encryption</li>
                                    <li>• Token management</li>
                                    <li>• Audit mechanisms</li>
                                    <li>• Regulatory compliance</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-6">5.1. Each Module Description</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                        </svg>
                                    </div>
                                    <h4 class="text-base font-medium text-slate-200">Authentication Module</h4>
                                </div>
                                <p class="text-slate-300 leading-relaxed">
                                    Orchestrates OAuth 2.0 Authorization Code Flow, manages secure redirects, and handles token exchange. Integrates with bank authentication endpoints via OpenFinance.ai, ensuring secure communication through authorized Open Banking intermediaries.
                                </p>
                            </div>
                            
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                        </svg>
                                    </div>
                                    <h4 class="text-base font-medium text-slate-200">Identity Assertion Service</h4>
                                </div>
                                <p class="text-slate-300 leading-relaxed">
                                    Generates cryptographically signed JWT identity assertions from bank-verified user data. Manages policy-based attribute disclosure, ensures GDPR compliance, and validates assertion integrity using JWS signatures.
                                </p>
                            </div>
                            
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                                        </svg>
                                    </div>
                                    <h4 class="text-base font-medium text-slate-200">Token Management</h4>
                                </div>
                                <p class="text-slate-300 leading-relaxed">
                                    Securely manages OAuth access tokens, refresh tokens, and session state. Implements encrypted storage, automatic expiration handling, and user-initiated revocation mechanisms for enhanced security.
                                </p>
                            </div>
                            
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                    </div>
                                    <h4 class="text-base font-medium text-slate-200">API Gateway</h4>
                                </div>
                                <p class="text-slate-300 leading-relaxed">
                                    Provides enterprise-grade RESTful API endpoints for service integration. Implements request validation, rate limiting, API versioning, and comprehensive error handling for production reliability.
                                </p>
                            </div>
                            
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                        </svg>
                                    </div>
                                    <h4 class="text-base font-medium text-slate-200">Audit & Compliance</h4>
                                </div>
                                <p class="text-slate-300 leading-relaxed">
                                    Comprehensive event logging and audit trail maintenance for regulatory compliance. Implements GDPR-compliant data retention policies and ensures adherence to financial services regulations.
                                </p>
                            </div>
                            
                            <div class="card-3d rounded-xl p-6 shadow-3d hover-lift">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                        </svg>
                                    </div>
                                    <h4 class="text-base font-medium text-slate-200">Client UI Module</h4>
                                </div>
                                <p class="text-slate-300 leading-relaxed">
                                    Provides embeddable authentication components, secure redirect handling, and real-time user feedback. Features full RTL support for Hebrew interface and responsive design optimized for all device types.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Architecture -->
                    <div class="bg-slate-800/50 rounded-lg p-8 border border-slate-700 mt-8">
                        <h3 class="text-lg font-medium text-slate-100 mb-6">Detailed System Architecture</h3>
                        
                        <!-- Microservices Architecture -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Microservices Architecture</h4>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700 mb-6">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">Inter-Service Communication</h5>
                                <p class="text-slate-300 text-sm mb-4">
                                    Microservices communicate through a combination of synchronous HTTP/REST APIs and asynchronous message queues using RabbitMQ for event-driven architecture.
                                </p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <h6 class="text-md font-semibold text-slate-200 mb-2">RabbitMQ Use Cases</h6>
                                        <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                            <li>Audit log event processing (async)</li>
                                            <li>Token revocation broadcasts</li>
                                            <li>Bank callback processing</li>
                                            <li>Email/notification queues</li>
                                            <li>Background job processing</li>
                                            <li>Service-to-service event notifications</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h6 class="text-md font-semibold text-slate-200 mb-2">Direct HTTP Use Cases</h6>
                                        <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                            <li>OAuth token exchange (synchronous)</li>
                                            <li>Service registration (immediate validation)</li>
                                            <li>Real-time API calls requiring immediate response</li>
                                            <li>User consent screen interactions</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="grid md:grid-cols-2 gap-4 mb-6">
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-2">OAuth Authorization Server</h5>
                                    <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                        <li>OAuth 2.0 Authorization Code Flow with PKCE</li>
                                        <li>OpenID Connect Core 1.0 implementation</li>
                                        <li>Token issuance and validation (JWT/JWS)</li>
                                        <li>Authorization code generation and exchange</li>
                                        <li>Refresh token management</li>
                                        <li>Scope-based access control</li>
                                        <li>JWKS endpoint for public key distribution</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-2">Client Registry Service</h5>
                                    <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                        <li>Service registration and onboarding</li>
                                        <li>Client credentials management (client_id, client_secret)</li>
                                        <li>Redirect URI validation</li>
                                        <li>Service approval workflow</li>
                                        <li>API key generation and rotation</li>
                                        <li>Service metadata management</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-2">Consent Orchestration Service</h5>
                                    <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                        <li>Consent request generation</li>
                                        <li>User consent capture and storage</li>
                                        <li>Scope management and validation</li>
                                        <li>Consent revocation handling</li>
                                        <li>Consent expiration management</li>
                                        <li>Multi-service consent tracking</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-2">OpenFinance.ai Integration Layer</h5>
                                    <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                        <li>Bank OAuth flow orchestration</li>
                                        <li>OpenFinance.ai API client</li>
                                        <li>Bank selection and routing</li>
                                        <li>Callback handling and validation</li>
                                        <li>Error handling and retry logic</li>
                                        <li>Bank-specific configuration management</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-2">Identity Assertion Engine</h5>
                                    <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                        <li>JWT assertion generation</li>
                                        <li>JWS signature creation (RS256/ES256)</li>
                                        <li>Attribute mapping and filtering</li>
                                        <li>Policy-based disclosure</li>
                                        <li>Assertion validation</li>
                                        <li>Assertion expiration management</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-2">Audit & Compliance Module</h5>
                                    <ul class="text-sm text-slate-300 space-y-1 list-disc list-inside">
                                        <li>Event logging (authentication, consent, token)</li>
                                        <li>Audit trail generation</li>
                                        <li>GDPR-compliant data retention</li>
                                        <li>Compliance reporting</li>
                                        <li>Security event monitoring</li>
                                        <li>Tamper-proof log storage</li>
                                        <li>RabbitMQ consumer for async log processing</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700 mt-6">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">RabbitMQ Architecture</h5>
                                <div class="space-y-4 text-sm text-slate-300">
                                    <div>
                                        <p class="font-semibold text-white mb-2">Message Queues & Exchanges:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li><code class="text-slate-400">audit.events</code> - Audit log events queue</li>
                                            <li><code class="text-slate-400">token.revocation</code> - Token revocation broadcasts</li>
                                            <li><code class="text-slate-400">bank.callbacks</code> - Bank OAuth callback processing</li>
                                            <li><code class="text-slate-400">notifications</code> - Email/notification queue</li>
                                            <li><code class="text-slate-400">consent.events</code> - Consent lifecycle events</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-white mb-2">Communication Patterns:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li><strong class="text-white">Pub/Sub:</strong> Token revocation events broadcast to all services</li>
                                            <li><strong class="text-white">Work Queues:</strong> Audit log processing with multiple workers</li>
                                            <li><strong class="text-white">Routing:</strong> Bank-specific callback routing</li>
                                            <li><strong class="text-white">Dead Letter Queues:</strong> Failed message handling and retry logic</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-white mb-2">Benefits:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li>Decoupled microservices (services don't need to know about each other)</li>
                                            <li>Reliable message delivery with acknowledgments</li>
                                            <li>Automatic retry and dead-letter queue handling</li>
                                            <li>Scalable processing with multiple consumers</li>
                                            <li>Message persistence for audit and recovery</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Database Schema -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Database Schema & Models</h4>
                            
                            <div class="space-y-6">
                                <!-- Users Table -->
                                <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                                        </svg>
                                        users
                                    </h5>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-slate-300">
                                            <thead class="text-xs text-slate-400 border-b border-slate-700">
                                                <tr>
                                                    <th class="px-3 py-2 text-left">Column</th>
                                                    <th class="px-3 py-2 text-left">Type</th>
                                                    <th class="px-3 py-2 text-left">Constraints</th>
                                                    <th class="px-3 py-2 text-left">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-700">
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">PRIMARY KEY</td>
                                                    <td class="px-3 py-2">Unique user identifier</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">bank_user_id</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">UNIQUE, NOT NULL</td>
                                                    <td class="px-3 py-2">Bank-provided user identifier (hashed)</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">bank_id</td>
                                                    <td class="px-3 py-2 font-mono">INTEGER</td>
                                                    <td class="px-3 py-2">FOREIGN KEY, NOT NULL</td>
                                                    <td class="px-3 py-2">Reference to banks table</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">verification_status</td>
                                                    <td class="px-3 py-2 font-mono">ENUM</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT 'pending'</td>
                                                    <td class="px-3 py-2">pending, verified, expired, revoked</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">verified_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Last verification timestamp</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">created_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT NOW()</td>
                                                    <td class="px-3 py-2">Account creation timestamp</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">verification_expires_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Verification validity expiration (GDPR data retention)</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">data_retention_until</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Maximum date until which user record may be retained</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">updated_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT NOW()</td>
                                                    <td class="px-3 py-2">Last update timestamp</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p class="text-xs text-slate-400 mt-3">
                                        <strong>Note:</strong> No PII stored. Only verification status and bank reference. All records have explicit retention expiration per GDPR requirements.</p>
                                </div>

                                <!-- Services Table -->
                                <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                                        </svg>
                                        services
                                    </h5>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-slate-300">
                                            <thead class="text-xs text-slate-400 border-b border-slate-700">
                                                <tr>
                                                    <th class="px-3 py-2 text-left">Column</th>
                                                    <th class="px-3 py-2 text-left">Type</th>
                                                    <th class="px-3 py-2 text-left">Constraints</th>
                                                    <th class="px-3 py-2 text-left">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-700">
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">PRIMARY KEY</td>
                                                    <td class="px-3 py-2">Unique service identifier</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">name</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Service display name</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">client_id</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">UNIQUE, NOT NULL</td>
                                                    <td class="px-3 py-2">OAuth client identifier</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">client_secret_hash</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Bcrypt hashed client secret</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">redirect_uris</td>
                                                    <td class="px-3 py-2 font-mono">JSONB</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Array of allowed redirect URIs</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">status</td>
                                                    <td class="px-3 py-2 font-mono">ENUM</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT 'pending'</td>
                                                    <td class="px-3 py-2">pending, approved, suspended, revoked</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">api_key</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">UNIQUE</td>
                                                    <td class="px-3 py-2">API key for service authentication</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">created_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT NOW()</td>
                                                    <td class="px-3 py-2">Registration timestamp</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Authorizations Table -->
                                <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                                        </svg>
                                        authorizations
                                    </h5>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-slate-300">
                                            <thead class="text-xs text-slate-400 border-b border-slate-700">
                                                <tr>
                                                    <th class="px-3 py-2 text-left">Column</th>
                                                    <th class="px-3 py-2 text-left">Type</th>
                                                    <th class="px-3 py-2 text-left">Constraints</th>
                                                    <th class="px-3 py-2 text-left">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-700">
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">PRIMARY KEY</td>
                                                    <td class="px-3 py-2">Unique authorization record ID</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">user_id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">FOREIGN KEY, NOT NULL</td>
                                                    <td class="px-3 py-2">Reference to users table</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">service_id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">FOREIGN KEY, NOT NULL</td>
                                                    <td class="px-3 py-2">Reference to services table</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">scopes</td>
                                                    <td class="px-3 py-2 font-mono">JSONB</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Granted OAuth scopes (e.g., ["name", "age"])</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">consent_given_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">User consent timestamp</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">consent_revoked_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Consent revocation timestamp</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">consent_expires_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Consent validity expiration; re-consent required after this date</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">storable_attributes</td>
                                                    <td class="px-3 py-2 font-mono">JSONB</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Per-attribute boolean indicating what data the service may store (e.g., {"name": true, "age": true, "id_number": false})</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">status</td>
                                                    <td class="px-3 py-2 font-mono">ENUM</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT 'active'</td>
                                                    <td class="px-3 py-2">active, revoked, expired</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p class="text-xs text-slate-400 mt-3">
                                        <strong>GDPR:</strong> The <code class="text-slate-400">storable_attributes</code> column explicitly records which attributes the service is permitted to store vs. only view transiently. <code class="text-slate-400">consent_expires_at</code> enforces time-limited consent per GDPR data minimization requirements.
                                    </p>
                                </div>

                                <!-- Tokens Table -->
                                <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                                        </svg>
                                        tokens
                                    </h5>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-slate-300">
                                            <thead class="text-xs text-slate-400 border-b border-slate-700">
                                                <tr>
                                                    <th class="px-3 py-2 text-left">Column</th>
                                                    <th class="px-3 py-2 text-left">Type</th>
                                                    <th class="px-3 py-2 text-left">Constraints</th>
                                                    <th class="px-3 py-2 text-left">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-700">
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">PRIMARY KEY</td>
                                                    <td class="px-3 py-2">Unique token record ID</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">authorization_id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">FOREIGN KEY, NOT NULL</td>
                                                    <td class="px-3 py-2">Reference to authorizations table</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">token_type</td>
                                                    <td class="px-3 py-2 font-mono">ENUM</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">access_token, refresh_token, id_token</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">token_hash</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">UNIQUE, NOT NULL</td>
                                                    <td class="px-3 py-2">SHA-256 hash of JWT (for revocation)</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">expires_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Token expiration timestamp</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">revoked_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Revocation timestamp</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">created_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT NOW()</td>
                                                    <td class="px-3 py-2">Token creation timestamp</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p class="text-xs text-slate-400 mt-3">
                                        <strong>Security:</strong> Only token hashes stored. Actual JWTs are stateless and validated via signature.
                                    </p>
                                </div>

                                <!-- Audit Logs Table -->
                                <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                                        </svg>
                                        audit_logs
                                    </h5>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-slate-300">
                                            <thead class="text-xs text-slate-400 border-b border-slate-700">
                                                <tr>
                                                    <th class="px-3 py-2 text-left">Column</th>
                                                    <th class="px-3 py-2 text-left">Type</th>
                                                    <th class="px-3 py-2 text-left">Constraints</th>
                                                    <th class="px-3 py-2 text-left">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-700">
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">id</td>
                                                    <td class="px-3 py-2 font-mono">BIGSERIAL</td>
                                                    <td class="px-3 py-2">PRIMARY KEY</td>
                                                    <td class="px-3 py-2">Sequential log entry ID</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">event_type</td>
                                                    <td class="px-3 py-2 font-mono">ENUM</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">auth_request, consent_given, token_issued, token_revoked, assertion_issued</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">user_id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">FOREIGN KEY, NULL</td>
                                                    <td class="px-3 py-2">User involved (if applicable)</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">service_id</td>
                                                    <td class="px-3 py-2 font-mono">UUID</td>
                                                    <td class="px-3 py-2">FOREIGN KEY, NULL</td>
                                                    <td class="px-3 py-2">Service involved (if applicable)</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">ip_address</td>
                                                    <td class="px-3 py-2 font-mono">INET</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Client IP address</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">user_agent</td>
                                                    <td class="px-3 py-2 font-mono">TEXT</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Client user agent</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">metadata</td>
                                                    <td class="px-3 py-2 font-mono">JSONB</td>
                                                    <td class="px-3 py-2">NULL</td>
                                                    <td class="px-3 py-2">Event-specific metadata</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">created_at</td>
                                                    <td class="px-3 py-2 font-mono">TIMESTAMP</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT NOW()</td>
                                                    <td class="px-3 py-2">Event timestamp</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p class="text-xs text-slate-400 mt-3">
                                        <strong>Retention:</strong> GDPR-compliant retention policy. Immutable logs with tamper detection.
                                    </p>
                                </div>

                                <!-- Banks Table -->
                                <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                                        </svg>
                                        banks
                                    </h5>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm text-slate-300">
                                            <thead class="text-xs text-slate-400 border-b border-slate-700">
                                                <tr>
                                                    <th class="px-3 py-2 text-left">Column</th>
                                                    <th class="px-3 py-2 text-left">Type</th>
                                                    <th class="px-3 py-2 text-left">Constraints</th>
                                                    <th class="px-3 py-2 text-left">Description</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-700">
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">id</td>
                                                    <td class="px-3 py-2 font-mono">INTEGER</td>
                                                    <td class="px-3 py-2">PRIMARY KEY</td>
                                                    <td class="px-3 py-2">Bank identifier</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">name</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">NOT NULL, UNIQUE</td>
                                                    <td class="px-3 py-2">Bank display name</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">openfinance_bank_id</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(255)</td>
                                                    <td class="px-3 py-2">UNIQUE, NOT NULL</td>
                                                    <td class="px-3 py-2">OpenFinance.ai bank identifier</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">oauth_endpoint</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(500)</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Bank OAuth authorization endpoint</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">token_endpoint</td>
                                                    <td class="px-3 py-2 font-mono">VARCHAR(500)</td>
                                                    <td class="px-3 py-2">NOT NULL</td>
                                                    <td class="px-3 py-2">Bank OAuth token endpoint</td>
                                                </tr>
                                                <tr>
                                                    <td class="px-3 py-2 font-mono text-slate-400">is_active</td>
                                                    <td class="px-3 py-2 font-mono">BOOLEAN</td>
                                                    <td class="px-3 py-2">NOT NULL, DEFAULT true</td>
                                                    <td class="px-3 py-2">Bank integration status</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Database Relationships -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Database Relationships</h4>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                <div class="space-y-4 text-sm text-slate-300">
                                    <div>
                                        <p class="font-semibold text-white mb-2">Primary Relationships:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li><code class="text-slate-400">users.bank_id</code> → <code class="text-slate-400">banks.id</code> (Many-to-One)</li>
                                            <li><code class="text-slate-400">authorizations.user_id</code> → <code class="text-slate-400">users.id</code> (Many-to-One)</li>
                                            <li><code class="text-slate-400">authorizations.service_id</code> → <code class="text-slate-400">services.id</code> (Many-to-One)</li>
                                            <li><code class="text-slate-400">tokens.authorization_id</code> → <code class="text-slate-400">authorizations.id</code> (Many-to-One)</li>
                                            <li><code class="text-slate-400">audit_logs.user_id</code> → <code class="text-slate-400">users.id</code> (Many-to-One, nullable)</li>
                                            <li><code class="text-slate-400">audit_logs.service_id</code> → <code class="text-slate-400">services.id</code> (Many-to-One, nullable)</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-white mb-2">Indexes for Performance:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li><code class="text-slate-400">users.bank_user_id</code> - Unique index for bank user lookup</li>
                                            <li><code class="text-slate-400">tokens.token_hash</code> - Unique index for token revocation</li>
                                            <li><code class="text-slate-400">tokens.expires_at</code> - Index for cleanup jobs</li>
                                            <li><code class="text-slate-400">tokens.token_type</code> - Index for filtering ID tokens</li>
                                            <li><code class="text-slate-400">audit_logs.created_at</code> - Index for time-based queries</li>
                                            <li><code class="text-slate-400">audit_logs.event_type</code> - Index for event filtering</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Data Retention & GDPR Compliance -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Data Retention & GDPR Compliance</h4>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700 mb-6">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">Core Principles</h5>
                                <p class="text-slate-300 text-sm mb-4">
                                    ProvIDe is designed around GDPR data minimization. The platform does <strong class="text-white">not</strong> store any PII, identity documents, financial data, or bank credentials. Only the minimum metadata required for verification orchestration is retained.
                                </p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <p class="font-semibold text-slate-400 mb-2 text-sm">Data We Store</p>
                                        <ul class="text-sm text-slate-300 space-y-1">
                                            <li class="flex items-start gap-2"><span class="text-slate-400">&#10003;</span> Bank-provided user ID (hashed)</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-400">&#10003;</span> Verification status and timestamps</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-400">&#10003;</span> Consent records (scopes, expiration)</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-400">&#10003;</span> Token hashes (SHA-256, not actual tokens)</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-400">&#10003;</span> Audit log entries</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-slate-500 mb-2 text-sm">Data We Never Store</p>
                                        <ul class="text-sm text-slate-300 space-y-1">
                                            <li class="flex items-start gap-2"><span class="text-slate-500">&#10007;</span> User's real name, address, or ID number</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-500">&#10007;</span> Identity documents or photos</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-500">&#10007;</span> Bank login credentials</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-500">&#10007;</span> Financial account data</li>
                                            <li class="flex items-start gap-2"><span class="text-slate-500">&#10007;</span> Actual JWT tokens (only hashes)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700 mb-6">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">Storable Attributes Flag (per Authorization)</h5>
                                <p class="text-slate-300 text-sm mb-4">
                                    Each authorization record includes a <code class="text-slate-400">storable_attributes</code> JSONB column that explicitly defines, per attribute, whether the third-party service is permitted to store the data or may only use it transiently during the session.
                                </p>
                                <div class="bg-slate-800 rounded p-4 font-mono text-xs overflow-x-auto">
                                    <div class="text-slate-400">// Example storable_attributes value:</div>
                                    <div class="text-slate-200 mt-1">{</div>
                                    <div class="text-slate-200 ml-4">"full_name": <span class="text-slate-400">true</span>,&nbsp;&nbsp;&nbsp;<span class="text-slate-500">// Service may store</span></div>
                                    <div class="text-slate-200 ml-4">"age_verified": <span class="text-slate-400">true</span>,&nbsp;<span class="text-slate-500">// Service may store</span></div>
                                    <div class="text-slate-200 ml-4">"country": <span class="text-slate-400">true</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-slate-500">// Service may store</span></div>
                                    <div class="text-slate-200 ml-4">"id_number": <span class="text-slate-500">false</span>,&nbsp;&nbsp;&nbsp;<span class="text-slate-500">// Transient only, must not be stored</span></div>
                                    <div class="text-slate-200 ml-4">"date_of_birth": <span class="text-slate-500">false</span>&nbsp;<span class="text-slate-500">// Transient only, must not be stored</span></div>
                                    <div class="text-slate-200">}</div>
                                </div>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">Expiration & Retention Policies</h5>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm text-slate-300">
                                        <thead class="text-xs text-slate-400 border-b border-slate-700">
                                            <tr>
                                                <th class="px-3 py-2 text-left">Data Type</th>
                                                <th class="px-3 py-2 text-left">Retention Period</th>
                                                <th class="px-3 py-2 text-left">Expiration Field</th>
                                                <th class="px-3 py-2 text-left">Cleanup Action</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-700">
                                            <tr>
                                                <td class="px-3 py-2">User verification records</td>
                                                <td class="px-3 py-2">90 days after last verification</td>
                                                <td class="px-3 py-2 font-mono text-slate-400">users.data_retention_until</td>
                                                <td class="px-3 py-2">Anonymize or delete record</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2">Consent records</td>
                                                <td class="px-3 py-2">Until revoked or expired</td>
                                                <td class="px-3 py-2 font-mono text-slate-400">authorizations.consent_expires_at</td>
                                                <td class="px-3 py-2">Set status to 'expired'</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2">Access tokens</td>
                                                <td class="px-3 py-2">15 minutes</td>
                                                <td class="px-3 py-2 font-mono text-slate-400">tokens.expires_at</td>
                                                <td class="px-3 py-2">Automatic expiration (JWT stateless)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2">Refresh tokens</td>
                                                <td class="px-3 py-2">30 days (single-use)</td>
                                                <td class="px-3 py-2 font-mono text-slate-400">tokens.expires_at</td>
                                                <td class="px-3 py-2">Delete hash from database</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2">Audit logs</td>
                                                <td class="px-3 py-2">7 years (regulatory)</td>
                                                <td class="px-3 py-2 font-mono text-slate-400">audit_logs.created_at + 7y</td>
                                                <td class="px-3 py-2">Archive to cold storage</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2">Signing keys</td>
                                                <td class="px-3 py-2">90-day rotation cycle</td>
                                                <td class="px-3 py-2 font-mono text-slate-400">JWKS key rotation</td>
                                                <td class="px-3 py-2">Rotate key, keep old for validation window</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Failure Handling & Recovery -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Failure Handling & Recovery Architecture</h4>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700 mb-6">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">Error Response Strategy</h5>
                                <p class="text-slate-300 text-sm mb-4">
                                    All failures are handled gracefully with clear user feedback, comprehensive logging, and automatic recovery where possible. The platform distinguishes between errors that are the bank's responsibility, OpenFinance.ai's responsibility, and ProvIDe's own errors.
                                </p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-700">
                                        <h6 class="text-white font-semibold mb-2 text-sm">Circuit Breaker Pattern</h6>
                                        <ul class="text-xs text-slate-300 space-y-1 list-disc list-inside">
                                            <li>Per-bank circuit breaker monitors failure rates</li>
                                            <li>Opens after 5 consecutive failures or >50% failure rate in 60s</li>
                                            <li>Half-open state: allows 1 test request every 30s</li>
                                            <li>Prevents cascading failures from a single bank outage</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-700">
                                        <h6 class="text-white font-semibold mb-2 text-sm">Retry Policy</h6>
                                        <ul class="text-xs text-slate-300 space-y-1 list-disc list-inside">
                                            <li>Exponential backoff: 1s, 2s, 4s (max 3 retries)</li>
                                            <li>Idempotency keys prevent duplicate operations</li>
                                            <li>Failed callbacks queued in dead-letter queue</li>
                                            <li>Manual retry available for ops team via admin panel</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700 mb-6">
                                <h5 class="text-sm font-medium text-slate-200 mb-3">Monitoring & Logging</h5>
                                <p class="text-slate-300 text-sm mb-4">
                                    Every failure event is logged with a structured format for monitoring, alerting, and post-incident analysis.
                                </p>
                                <div class="bg-slate-800 rounded p-4 font-mono text-xs overflow-x-auto">
                                    <div class="text-slate-400">// Example failure log entry:</div>
                                    <div class="text-slate-200 mt-1">{</div>
                                    <div class="text-slate-200 ml-4">"timestamp": "2025-06-15T14:30:00Z",</div>
                                    <div class="text-slate-200 ml-4">"correlation_id": "req-abc123",</div>
                                    <div class="text-slate-200 ml-4">"event_type": "bank_auth_failure",</div>
                                    <div class="text-slate-200 ml-4">"bank_id": 12,</div>
                                    <div class="text-slate-200 ml-4">"error_code": "BANK_TIMEOUT",</div>
                                    <div class="text-slate-200 ml-4">"error_source": "openfinance_callback",</div>
                                    <div class="text-slate-200 ml-4">"retry_count": 2,</div>
                                    <div class="text-slate-200 ml-4">"circuit_breaker_state": "closed",</div>
                                    <div class="text-slate-200 ml-4">"user_action": "retry_offered",</div>
                                    <div class="text-slate-200 ml-4">"response_time_ms": 5000</div>
                                    <div class="text-slate-200">}</div>
                                </div>
                                <div class="mt-4 grid md:grid-cols-3 gap-3 text-xs">
                                    <div class="bg-slate-800/50 rounded p-3 border border-slate-700">
                                        <p class="text-white font-semibold mb-1">Alerting Thresholds</p>
                                        <ul class="text-slate-300 space-y-1">
                                            <li>Bank failure rate > 10%: Warning</li>
                                            <li>Bank failure rate > 50%: Critical</li>
                                            <li>ProvIDe error rate > 1%: Critical</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-800/50 rounded p-3 border border-slate-700">
                                        <p class="text-white font-semibold mb-1">Log Destinations</p>
                                        <ul class="text-slate-300 space-y-1">
                                            <li>Structured logs (JSON) to Loki</li>
                                            <li>Audit events to PostgreSQL</li>
                                            <li>Metrics to Prometheus</li>
                                        </ul>
                                    </div>
                                    <div class="bg-slate-800/50 rounded p-3 border border-slate-700">
                                        <p class="text-white font-semibold mb-1">Dashboards</p>
                                        <ul class="text-slate-300 space-y-1">
                                            <li>Per-bank health status</li>
                                            <li>Verification success/failure rates</li>
                                            <li>API latency percentiles</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Architecture -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Security Architecture Details</h4>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Encryption & Hashing</h5>
                                    <ul class="text-sm text-slate-300 space-y-2">
                                        <li><strong class="text-white">TLS 1.3:</strong> All external communications</li>
                                        <li><strong class="text-white">AES-256-GCM:</strong> Data encryption at rest</li>
                                        <li><strong class="text-white">Bcrypt (cost 12):</strong> Client secrets hashing</li>
                                        <li><strong class="text-white">SHA-256:</strong> Token hash for revocation tracking</li>
                                        <li><strong class="text-white">RSA-2048 / ECDSA-P256:</strong> JWT signing keys</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Key Management</h5>
                                    <ul class="text-sm text-slate-300 space-y-2">
                                        <li><strong class="text-white">JWKS:</strong> Public key distribution endpoint</li>
                                        <li><strong class="text-white">Key Rotation:</strong> Automated key rotation every 90 days</li>
                                        <li><strong class="text-white">HSM Integration:</strong> Private keys stored in HSM (production)</li>
                                        <li><strong class="text-white">Key Versioning:</strong> Support for multiple active keys</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Token Security</h5>
                                    <ul class="text-sm text-slate-300 space-y-2">
                                        <li><strong class="text-white">Short-lived Access Tokens:</strong> 15 minutes expiration</li>
                                        <li><strong class="text-white">Refresh Tokens:</strong> 30 days, single-use, revocable</li>
                                        <li><strong class="text-white">PKCE:</strong> Code challenge for public clients</li>
                                        <li><strong class="text-white">State Parameter:</strong> CSRF protection</li>
                                        <li><strong class="text-white">Nonce:</strong> Replay attack prevention</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Access Control</h5>
                                    <ul class="text-sm text-slate-300 space-y-2">
                                        <li><strong class="text-white">Scope-based:</strong> Fine-grained permissions</li>
                                        <li><strong class="text-white">Rate Limiting:</strong> Per-client, per-endpoint</li>
                                        <li><strong class="text-white">IP Whitelisting:</strong> Optional for services</li>
                                        <li><strong class="text-white">CORS:</strong> Strict origin validation</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Data Flow Architecture -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Detailed Data Flow</h4>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                <div class="space-y-4">
                                    <div>
                                        <h5 class="text-sm font-medium text-slate-200 mb-2">1. Authorization Request Flow</h5>
                                        <ol class="text-sm text-slate-300 space-y-1 ml-4 list-decimal">
                                            <li>Client redirects user to <code class="text-slate-400">/oauth/authorize</code> with client_id, redirect_uri, scope, state, code_challenge</li>
                                            <li>Authorization Server validates client_id, redirect_uri, generates authorization_code</li>
                                            <li>Authorization Server stores code with expiration (10 min), PKCE challenge, scopes</li>
                                            <li>User redirected to bank selection → OpenFinance.ai → Bank OAuth</li>
                                            <li>Bank authenticates user, returns to OpenFinance.ai callback</li>
                                            <li>OpenFinance.ai validates and forwards to ProvIDe callback</li>
                                            <li>ProvIDe creates/updates user record, sets verification_status = 'verified'</li>
                                            <li>User redirected to consent screen with requested scopes</li>
                                            <li>User approves → authorization record created in database</li>
                                            <li>User redirected back to client with authorization_code</li>
                                        </ol>
                                    </div>
                                    <div>
                                        <h5 class="text-sm font-medium text-slate-200 mb-2">2. Token Exchange Flow</h5>
                                        <ol class="text-sm text-slate-300 space-y-1 ml-4 list-decimal">
                                            <li>Client POSTs to <code class="text-slate-400">/oauth/token</code> with authorization_code, code_verifier, client_id, client_secret</li>
                                            <li>Authorization Server validates code, verifies PKCE challenge</li>
                                            <li>Authorization Server retrieves authorization record, validates expiration</li>
                                            <li>Identity Assertion Engine generates JWT ID token with user claims (based on scopes)</li>
                                            <li>Access token (JWT) generated with scopes, user_id, service_id</li>
                                            <li>Refresh token generated, stored in database (hashed)</li>
                                            <li>Token records created in tokens table (access_token, refresh_token, id_token)</li>
                                            <li>Audit log entry created</li>
                                            <li>Tokens returned to client (access_token, refresh_token, id_token, expires_in)</li>
                                        </ol>
                                    </div>
                                    <div>
                                        <h5 class="text-sm font-medium text-slate-200 mb-2">3. Identity Assertion Generation</h5>
                                        <ol class="text-sm text-slate-300 space-y-1 ml-4 list-decimal">
                                            <li>Identity Assertion Engine receives verified user data from bank</li>
                                            <li>Scopes filtered based on authorization record</li>
                                            <li>JWT header created: {"alg": "RS256", "typ": "JWT", "kid": "key-id"}</li>
                                            <li>JWT payload created with: iss, sub, aud, exp, iat, jti, and scope-based claims</li>
                                            <li>Claims include only authorized attributes (name, age, country, etc.)</li>
                                            <li>JWT signed using RS256 with private key</li>
                                            <li>JWS signature appended</li>
                                            <li>ID token record created in tokens table (token_type = 'id_token')</li>
                                            <li>JWT returned as id_token in token response</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Technology Stack -->
                        <div class="mb-8">
                            <h4 class="text-sm font-medium text-slate-300 mb-4">Technology Stack & Design Patterns</h4>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Backend Stack</h5>
                                    <ul class="text-sm text-slate-300 space-y-1">
                                        <li><strong class="text-white">Runtime:</strong> Node.js 18+</li>
                                        <li><strong class="text-white">Framework:</strong> Express.js</li>
                                        <li><strong class="text-white">Database:</strong> PostgreSQL 15+ (ACID, transactions)</li>
                                        <li><strong class="text-white">ORM:</strong> Prisma</li>
                                        <li><strong class="text-white">Caching:</strong> Redis (token blacklist, rate limiting, session storage)</li>
                                        <li><strong class="text-white">Message Queue:</strong> RabbitMQ (async processing, event-driven communication)</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Design Patterns</h5>
                                    <ul class="text-sm text-slate-300 space-y-1">
                                        <li><strong class="text-white">Microservices:</strong> Service-oriented architecture</li>
                                        <li><strong class="text-white">Repository Pattern:</strong> Data access abstraction</li>
                                        <li><strong class="text-white">Factory Pattern:</strong> Service instantiation</li>
                                        <li><strong class="text-white">Strategy Pattern:</strong> Bank-specific adapters</li>
                                        <li><strong class="text-white">Observer Pattern:</strong> Event-driven audit logging</li>
                                        <li><strong class="text-white">Circuit Breaker:</strong> External API resilience</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Security Libraries</h5>
                                    <ul class="text-sm text-slate-300 space-y-1">
                                        <li><strong class="text-white">JWT:</strong> jsonwebtoken / jose</li>
                                        <li><strong class="text-white">OAuth:</strong> node-oauth2-server / oauth2orize</li>
                                        <li><strong class="text-white">Crypto:</strong> Node crypto</li>
                                        <li><strong class="text-white">Hashing:</strong> bcrypt</li>
                                    </ul>
                                </div>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                    <h5 class="text-sm font-medium text-slate-200 mb-3">Infrastructure</h5>
                                    <ul class="text-sm text-slate-300 space-y-1">
                                        <li><strong class="text-white">Containerization:</strong> Docker</li>
                                        <li><strong class="text-white">Load Balancing:</strong> NGINX</li>
                                        <li><strong class="text-white">Monitoring:</strong> Prometheus, Grafana (TBD)</li>
                                        <li><strong class="text-white">Logging:</strong> Loki (with Grafana)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- API Design Details -->
                        <div>
                            <h4 class="text-sm font-medium text-slate-300 mb-4">API Design Patterns</h4>
                            <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                                <div class="space-y-4 text-sm text-slate-300">
                                    <div>
                                        <p class="font-semibold text-white mb-2">RESTful Principles:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li>Resource-based URLs (<code class="text-slate-400">/api/v1/identity/assertions/:id</code>)</li>
                                            <li>HTTP methods: GET (read), POST (create), PUT (update), DELETE (remove)</li>
                                            <li>Status codes: 200 (success), 201 (created), 400 (bad request), 401 (unauthorized), 404 (not found), 500 (server error)</li>
                                            <li>JSON request/response format</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-white mb-2">Request/Response Examples:</p>
                                        <div class="bg-slate-800 rounded p-3 mt-2 font-mono text-xs overflow-x-auto">
                                            <div class="text-sky-400">POST /oauth/token</div>
                                            <div class="text-slate-400 mt-2">Request:</div>
                                            <div class="text-slate-200 mt-1">{</div>
                                            <div class="text-slate-200 ml-4">"grant_type": "authorization_code",</div>
                                            <div class="text-slate-200 ml-4">"code": "abc123...",</div>
                                            <div class="text-slate-200 ml-4">"redirect_uri": "https://client.com/callback",</div>
                                            <div class="text-slate-200 ml-4">"client_id": "client_xyz",</div>
                                            <div class="text-slate-200 ml-4">"code_verifier": "sha256_hash..."</div>
                                            <div class="text-slate-200">}</div>
                                            <div class="text-slate-400 mt-3">Response:</div>
                                            <div class="text-slate-200 mt-1">{</div>
                                            <div class="text-slate-200 ml-4">"access_token": "eyJhbGciOiJSUzI1NiIs...",</div>
                                            <div class="text-slate-200 ml-4">"token_type": "Bearer",</div>
                                            <div class="text-slate-200 ml-4">"expires_in": 900,</div>
                                            <div class="text-slate-200 ml-4">"refresh_token": "def456...",</div>
                                            <div class="text-slate-200 ml-4">"id_token": "eyJhbGciOiJSUzI1NiIs..."</div>
                                            <div class="text-slate-200">}</div>
                                        </div>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-white mb-2">Error Handling:</p>
                                        <ul class="space-y-1 ml-4 list-disc">
                                            <li>Consistent error format: <code class="text-slate-400">{"error": "error_code", "error_description": "human readable"}</code></li>
                                            <li>Validation errors return 400 with field-level details</li>
                                            <li>Rate limiting returns 429 with Retry-After header</li>
                                            <li>All errors logged for debugging (without sensitive data)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Work Plan -->
        <section id="work-plan" class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-800/30">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Execution</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">6. Work Plan</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                </div>
                
                <div class="space-y-8">
                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-6">Team Members</h3>
                        <div class="grid md:grid-cols-2 gap-4 text-slate-300">
                            <div>
                                <p class="font-semibold text-white">Amit Zamir</p>
                                <p class="text-sm">ID: 322833021</p>
                                <p class="text-sm">Email: Im.amit.zamir@gmail.com</p>
                            </div>
                            <div>
                                <p class="font-semibold text-white">Noa Almakais</p>
                                <p class="text-sm">ID: 211632302</p>
                                <p class="text-sm">Email: noaelmakies1@gmail.com</p>
                            </div>
                            <div>
                                <p class="font-semibold text-white">May Gorvitz</p>
                                <p class="text-sm">ID: 322438177</p>
                                <p class="text-sm">Email: mht1445@gmail.com</p>
                            </div>
                            <div>
                                <p class="font-semibold text-white">Hai Tal</p>
                                <p class="text-sm">ID: 311561245</p>
                                <p class="text-sm">Email: haital18@gmail.com</p>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-6">Project Milestones</h3>
                        <div class="space-y-4">
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-sm font-medium text-slate-300 mb-2">Milestone 1: Regulatory Onboarding & OpenFinance.ai Integration</h4>
                                <p class="text-slate-300 mb-3">Regulatory compliance setup, OpenFinance.ai platform integration, and secure bank connectivity implementation.</p>
                                <p class="text-sm text-slate-400">Responsibility: Backend team members</p>
                            </div>
                            
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-sm font-medium text-slate-300 mb-2">Milestone 2: Consent Orchestration & Assertion Engine</h4>
                                <p class="text-slate-300 mb-3">Implementation of consent orchestration service, identity assertion engine with JWT generation, and policy-based attribute disclosure.</p>
                                <p class="text-sm text-slate-400">Responsibility: Backend team members</p>
                            </div>
                            
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-sm font-medium text-slate-300 mb-2">Milestone 3: OAuth IdP Enablement & Client Registry</h4>
                                <p class="text-slate-300 mb-3">OAuth 2.0 / OpenID Connect Identity Provider implementation, client registry service, and third-party platform registration system.</p>
                                <p class="text-sm text-slate-400">Responsibility: Backend team members</p>
                            </div>
                            
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-sm font-medium text-slate-300 mb-2">Milestone 4: Frontend Development</h4>
                                <p class="text-slate-300 mb-3">Client-side application with authentication UI, consent screens, redirect handling, RTL support, and responsive design.</p>
                                <p class="text-sm text-slate-400">Responsibility: Frontend team members</p>
                            </div>
                            
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-sm font-medium text-slate-300 mb-2">Milestone 5: Security Hardening, Auditing & Documentation</h4>
                                <p class="text-slate-300 mb-3">Security hardening, comprehensive audit logging, compliance verification, end-to-end testing, and final documentation.</p>
                                <p class="text-sm text-slate-400">Responsibility: All team members</p>
                            </div>
                        </div>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <p class="text-slate-300">
                            <strong class="text-white">Note:</strong> Detailed work plan with specific tasks and timelines will be managed using team management software (Monday, Trello, or Jira).
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Proof of Concept -->
        <section id="poc" class="py-24 px-4 sm:px-6 lg:px-8">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Validation</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">7. Proof of Concept</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                    <p class="text-lg text-slate-400 mt-4 max-w-3xl">
                        The POC targets the most challenging end-to-end path to prove system viability and architectural resilience.
                    </p>
                </div>

                <div class="space-y-8">
                    <!-- POC Objective -->
                    <div class="card-3d rounded-2xl p-8 shadow-3d-lg">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Objective</h3>
                        <p class="text-lg text-slate-300 leading-relaxed">
                            Demonstrate a complete, working identity verification flow from a third-party service through ProvIDe to a bank via OpenFinance.ai and back — including OAuth authorization, bank authentication, consent capture, JWT assertion generation, and token exchange. This validates the core architectural decisions and proves the platform can deliver bank-verified identity in a real-world scenario.
                        </p>
                    </div>

                    <!-- Most Challenging Path -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-slate-500/10 rounded-lg flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-medium text-slate-100">Critical Path: End-to-End Bank Verification</h3>
                        </div>
                        <p class="text-slate-300 mb-6">
                            The POC focuses on the most challenging and critical path — a complete OAuth 2.0 Authorization Code Flow with PKCE, bank authentication via OpenFinance.ai, and signed JWT identity assertion delivery. This path exercises every core component.
                        </p>
                        <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700">
                            <h4 class="text-lg font-semibold text-slate-200 mb-4">POC Flow Steps</h4>
                            <ol class="space-y-3 text-slate-300 list-decimal list-inside">
                                <li><strong class="text-white">Service initiates OAuth request</strong> — Demo client sends authorization request with PKCE challenge and requested scopes</li>
                                <li><strong class="text-white">ProvIDe validates and redirects</strong> — OAuth Authorization Server validates parameters, redirects to bank selection</li>
                                <li><strong class="text-white">Bank authentication via OpenFinance.ai</strong> — User authenticates with bank through OpenFinance.ai sandbox/test environment</li>
                                <li><strong class="text-white">Callback handling</strong> — ProvIDe processes OpenFinance.ai callback, extracts verified identity data</li>
                                <li><strong class="text-white">Consent capture</strong> — User reviews and approves identity attributes for sharing</li>
                                <li><strong class="text-white">JWT assertion generation</strong> — Identity Assertion Engine creates RS256-signed JWT with verified claims</li>
                                <li><strong class="text-white">Token exchange</strong> — Demo client exchanges authorization code for access token + ID token</li>
                                <li><strong class="text-white">Assertion validation</strong> — Demo client validates JWT signature using JWKS endpoint</li>
                            </ol>
                        </div>
                    </div>

                    <!-- POC Scope -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <h3 class="text-lg font-medium text-slate-100 mb-6">POC Scope & Deliverables</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-lg font-semibold text-slate-400 mb-3">Included in POC</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>OAuth 2.0 Authorization Code Flow with PKCE</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>OpenFinance.ai integration (sandbox environment)</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>Bank selection and authentication redirect</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>Consent screen with attribute selection</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>JWT identity assertion generation (RS256)</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>Token exchange endpoint</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>JWKS endpoint for public key distribution</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>PostgreSQL database with core schema</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>Basic audit logging</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-400 mt-0.5">&#10003;</span>
                                        <span>Demo client application for end-to-end testing</span>
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-slate-400 mb-3">Deferred to Full Implementation</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Full microservices separation (POC uses monolith)</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>RabbitMQ async messaging</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Redis caching and rate limiting</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Docker containerization</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>NGINX load balancing</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Full GDPR compliance mechanisms</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Key rotation and HSM integration</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Production-grade monitoring (Prometheus/Grafana)</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-slate-500 mt-0.5">&#9675;</span>
                                        <span>Full RTL Hebrew UI</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Success Criteria -->
                    <div class="card-3d rounded-xl p-8 shadow-3d-lg">
                        <h3 class="text-lg font-medium text-slate-100 mb-6">Success Criteria</h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-4 bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <div class="w-8 h-8 bg-slate-500/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                                    <span class="text-slate-400 font-bold text-sm">1</span>
                                </div>
                                <div>
                                    <p class="text-white font-semibold">End-to-End Flow Completion</p>
                                    <p class="text-slate-300 text-sm">A demo client can successfully complete the full identity verification flow from OAuth authorization through bank authentication to receiving a valid signed JWT.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4 bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <div class="w-8 h-8 bg-slate-500/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                                    <span class="text-slate-400 font-bold text-sm">2</span>
                                </div>
                                <div>
                                    <p class="text-white font-semibold">JWT Integrity & Validation</p>
                                    <p class="text-slate-300 text-sm">The issued JWT can be cryptographically verified using the JWKS endpoint, contains the correct claims based on granted scopes, and has proper expiration.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4 bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <div class="w-8 h-8 bg-slate-500/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                                    <span class="text-slate-400 font-bold text-sm">3</span>
                                </div>
                                <div>
                                    <p class="text-white font-semibold">Bank Integration Working</p>
                                    <p class="text-slate-300 text-sm">Successful authentication with at least one bank through OpenFinance.ai sandbox, with proper callback handling and error recovery.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4 bg-slate-900/50 rounded-lg p-4 border border-slate-700">
                                <div class="w-8 h-8 bg-slate-500/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                                    <span class="text-slate-400 font-bold text-sm">4</span>
                                </div>
                                <div>
                                    <p class="text-white font-semibold">No Sensitive Data Storage</p>
                                    <p class="text-slate-300 text-sm">Verify that no PII, bank credentials, or financial data is stored in the database — only hashed identifiers, verification status, and consent records.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Client Side -->
        <section id="client-side" class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-800/30">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Frontend</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">8. Client Side</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                </div>
                
                <div class="space-y-8">
                    <div class="text-slate-300 leading-relaxed">
                        <p>
                            The client-side application provides a seamless user experience for bank-verified identity authentication. Built with modern web frameworks (Angular or React), the application features a clean, intuitive interface with RTL support for Hebrew users.
                        </p>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Key Features</h3>
                        <ul class="space-y-3 text-slate-300 list-disc list-inside">
                            <li>Unified authentication button component for easy integration</li>
                            <li>Secure OAuth redirect handling and callback management</li>
                            <li>RTL (Right-to-Left) UI support for Hebrew interface</li>
                            <li>Responsive design optimized for mobile and desktop</li>
                            <li>Real-time authentication status feedback</li>
                            <li>Error handling and user-friendly error messages</li>
                            <li>Dark mode support for better user experience</li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-4">8.1. Usage Illustration</h3>
                        <div class="space-y-6">
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-3">Scenario 1: Fintech Onboarding</h4>
                                <ol class="space-y-2 text-slate-300 list-decimal list-inside">
                                    <li>User visits a fintech service website and initiates account creation</li>
                                    <li>Service displays "Login / Verify with Bank" button</li>
                                    <li>User clicks the button and is redirected to consent screen showing requested attributes</li>
                                    <li>User reviews and approves consent, then authenticates with bank via OpenFinance.ai</li>
                                    <li>User authenticates with bank using Strong Customer Authentication (password, OTP, biometrics)</li>
                                    <li>Bank confirms identity and redirects back to fintech service</li>
                                    <li>Fintech service receives cryptographically signed identity assertion</li>
                                    <li>Account is created instantly without document upload - identity is verified via bank</li>
                                </ol>
                            </div>

                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-3">Scenario 2: Trading Account Activation</h4>
                                <ol class="space-y-2 text-slate-300 list-decimal list-inside">
                                    <li>User wants to activate a trading account that requires age and residency verification</li>
                                    <li>Trading platform requires identity verification for regulatory compliance</li>
                                    <li>User clicks "Verify via Bank" authentication button</li>
                                    <li>Consent screen displays requested attributes (age, country, name)</li>
                                    <li>After bank authentication and user consent, platform receives verified identity assertion</li>
                                    <li>Trading account is activated with verified status</li>
                                    <li>User can start trading immediately without document verification delays</li>
                                </ol>
                            </div>

                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-3">Scenario 3: Marketplace Seller Verification</h4>
                                <ol class="space-y-2 text-slate-300 list-decimal list-inside">
                                    <li>User wants to create a seller account on a marketplace platform</li>
                                    <li>Platform requires identity verification for sellers to prevent fraud</li>
                                    <li>User authenticates via bank using ProvIDe platform</li>
                                    <li>Consent screen shows what information will be shared (name, ID verification status)</li>
                                    <li>Service receives verified identity assertion without full ID details</li>
                                    <li>Seller account is created instantly with verified status</li>
                                    <li>Privacy is maintained - only necessary information is shared</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-6">8.2. Mockup</h3>
                        <p class="text-slate-300 mb-6">
                            Visual mockups of the key client-side screens and components:
                        </p>
                        
                        <div class="space-y-8">
                            <!-- Authentication Button Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Authentication Button Component</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-4 md:p-6 shadow-xl max-w-md w-full">
                                        <h5 class="text-slate-900 font-semibold mb-4 text-center">Verify Your Identity</h5>
                                        <button class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-3 transition-all shadow-none">
                                            <div class="bg-white/20 rounded p-1">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                                    <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                                </svg>
                                            </div>
                                            <span>Verify Identity via Bank</span>
                                        </button>
                                        <p class="text-slate-500 text-xs text-center mt-3">Powered by ProvIDe</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Bank Selection Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Bank Selection Interface</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-4 md:p-6 shadow-xl max-w-md w-full">
                                        <h5 class="text-slate-900 font-semibold mb-4">Select Your Bank</h5>
                                        <div class="space-y-3">
                                            <button class="w-full border-2 border-slate-200 hover:border-slate-400 hover:bg-slate-50 rounded-lg p-4 flex items-center gap-4 transition-all text-left">
                                                <div class="w-12 h-12 bg-slate-200 rounded-lg flex items-center justify-center">
                                                    <span class="text-slate-600 font-bold">B1</span>
                                                </div>
                                                <div>
                                                    <p class="font-semibold text-slate-900">Bank Hapoalim</p>
                                                    <p class="text-xs text-slate-500">Israel's leading bank</p>
                                                </div>
                                            </button>
                                            <button class="w-full border-2 border-slate-200 hover:border-slate-400 hover:bg-slate-50 rounded-lg p-4 flex items-center gap-4 transition-all text-left">
                                                <div class="w-12 h-12 bg-slate-200 rounded-lg flex items-center justify-center">
                                                    <span class="text-slate-600 font-bold">L1</span>
                                                </div>
                                                <div>
                                                    <p class="font-semibold text-slate-900">Leumi Bank</p>
                                                    <p class="text-xs text-slate-500">Trusted banking partner</p>
                                                </div>
                                            </button>
                                            <button class="w-full border-2 border-slate-200 hover:border-slate-400 hover:bg-slate-50 rounded-lg p-4 flex items-center gap-4 transition-all text-left">
                                                <div class="w-12 h-12 bg-slate-200 rounded-lg flex items-center justify-center">
                                                    <span class="text-slate-600 font-bold">M1</span>
                                                </div>
                                                <div>
                                                    <p class="font-semibold text-slate-900">Mizrahi Tefahot</p>
                                                    <p class="text-xs text-slate-500">Secure banking</p>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Bank Login Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Bank Login to Verify Identity</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full" dir="rtl">
                                        <div class="space-y-6">
                                            <!-- Username Field -->
                                            <div class="relative">
                                                <div class="flex items-center justify-between mb-2">
                                                    <label class="text-slate-700 text-sm font-medium">קוד משתמש</label>
                                                    <button class="w-5 h-5 rounded-full bg-slate-200 hover:bg-slate-300 flex items-center justify-center transition-colors" title="עזרה">
                                                        <span class="text-slate-600 text-xs font-bold">?</span>
                                                    </button>
                                                </div>
                                                <div class="border-b-2 border-slate-300 pb-2">
                                                    <input type="text" class="w-full bg-transparent text-slate-900 placeholder-slate-400 outline-none" placeholder="" />
                                                </div>
                                            </div>

                                            <!-- Password Field -->
                                            <div class="relative">
                                                <div class="flex items-center justify-between mb-2">
                                                    <label class="text-slate-700 text-sm font-medium">סיסמה</label>
                                                    <div class="flex items-center gap-2">
                                                        <button class="w-5 h-5 rounded-full bg-slate-200 hover:bg-slate-300 flex items-center justify-center transition-colors" title="עזרה">
                                                            <span class="text-slate-600 text-xs font-bold">?</span>
                                                        </button>
                                                        <button class="w-5 h-5 text-slate-400 hover:text-slate-600 transition-colors" title="הצג סיסמה">
                                                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                <path stroke-linecap="round" stroke-linejoin="round" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L12 12m-5.71-5.71L12 12" />
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="border-b-2 border-slate-300 pb-2">
                                                    <input type="password" class="w-full bg-transparent text-slate-900 placeholder-slate-400 outline-none" placeholder="" />
                                                </div>
                                            </div>

                                            <!-- Smart Login Option -->
                                            <div class="flex items-center justify-between py-3 border-t border-slate-200">
                                                <div class="flex items-center gap-3">
                                                    <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center">
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                                                        </svg>
                                                    </div>
                                                    <span class="text-slate-700 text-sm font-medium">כניסה חכמה באמצעות זיהוי פנים</span>
                                                </div>
                                            </div>

                                            <!-- Login Button -->
                                            <button class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-4 px-6 rounded-lg transition-all shadow-none ">
                                                כניסה לחשבון
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Consent Screen Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Consent Screen - Attribute Disclosure</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full">
                                        <h5 class="text-slate-900 font-semibold mb-4">Consent to Share Identity Information</h5>
                                        <p class="text-slate-600 text-sm mb-4">The following service is requesting access to your verified identity information:</p>
                                        <div class="bg-slate-50 rounded-lg p-4 mb-4">
                                            <p class="font-semibold text-slate-900 mb-2">Trading Platform</p>
                                            <p class="text-xs text-slate-600">trading-platform.example.com</p>
                                        </div>
                                        <div class="border-t border-slate-200 pt-4 mb-4">
                                            <p class="text-slate-700 text-sm font-medium mb-3">Requested Information:</p>
                                            <ul class="space-y-2 text-slate-600 text-sm">
                                                <li class="flex items-center gap-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                    </svg>
                                                    Full Name
                                                </li>
                                                <li class="flex items-center gap-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                    </svg>
                                                    Age Verification
                                                </li>
                                                <li class="flex items-center gap-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                    </svg>
                                                    Country of Residence
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="bg-slate-50 rounded-lg p-3 mb-4">
                                            <p class="text-xs text-slate-600">
                                                <strong class="text-slate-900">Note:</strong> Your bank login credentials and full ID number will not be shared. Only verified identity attributes will be provided.
                                            </p>
                                        </div>
                                        <div class="flex gap-3">
                                            <button class="flex-1 border-2 border-slate-300 hover:border-slate-400 text-slate-700 font-semibold py-3 px-6 rounded-lg transition-all">
                                                Cancel
                                            </button>
                                            <button class="flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-6 rounded-lg transition-all shadow-none">
                                                Approve & Continue
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Redirect/Loading Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Redirect / Loading State</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full text-center">
                                        <div class="mb-6">
                                            <div class="inline-block animate-spin rounded-full h-16 w-16 border-4 border-slate-300 border-t-slate-600"></div>
                                        </div>
                                        <h5 class="text-slate-900 font-semibold mb-2">Redirecting to Bank</h5>
                                        <p class="text-slate-500 text-sm">Please wait while we securely connect you to your bank...</p>
                                        <div class="mt-4 flex items-center justify-center gap-2">
                                            <div class="w-2 h-2 bg-slate-500 rounded-full animate-pulse"></div>
                                            <div class="w-2 h-2 bg-slate-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                                            <div class="w-2 h-2 bg-slate-500 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Success Screen Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Success Confirmation Screen</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full text-center">
                                        <div class="mb-6">
                                            <div class="inline-flex items-center justify-center w-20 h-20 bg-emerald-100 rounded-full">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                                                </svg>
                                            </div>
                                        </div>
                                        <h5 class="text-slate-900 font-semibold text-xl mb-2">Identity Verified Successfully!</h5>
                                        <p class="text-slate-500 text-sm mb-6">Your identity has been verified by your bank. You can now proceed.</p>
                                        <button class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-6 rounded-lg transition-all shadow-none">
                                            Continue
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Error Handling Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Error Handling Screen</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full text-center">
                                        <div class="mb-6">
                                            <div class="inline-flex items-center justify-center w-20 h-20 bg-red-100 rounded-full">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                                </svg>
                                            </div>
                                        </div>
                                        <h5 class="text-slate-900 font-semibold text-xl mb-2">Authentication Failed</h5>
                                        <p class="text-slate-500 text-sm mb-6">We couldn't verify your identity. Please try again or contact support if the problem persists.</p>
                                        <div class="space-y-3">
                                            <button class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-6 rounded-lg transition-all shadow-none">
                                                Try Again
                                            </button>
                                            <button class="w-full border-2 border-slate-300 hover:border-slate-400 text-slate-700 font-semibold py-3 px-6 rounded-lg transition-all">
                                                Contact Support
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- OTP Verification Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">OTP / Two-Factor Authentication</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full text-center" dir="rtl">
                                        <div class="mb-6">
                                            <div class="inline-flex items-center justify-center w-16 h-16 bg-slate-100 rounded-full mb-4">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                                </svg>
                                            </div>
                                        </div>
                                        <h5 class="text-slate-900 font-semibold text-lg mb-2">אימות נוסף נדרש</h5>
                                        <p class="text-slate-600 text-sm mb-6">קוד אימות נשלח למספר הטלפון שלך</p>
                                        <div class="flex justify-center gap-3 mb-6">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-2xl font-bold border-2 border-slate-300 rounded-lg focus:border-slate-400 focus:outline-none" />
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-2xl font-bold border-2 border-slate-300 rounded-lg focus:border-slate-400 focus:outline-none" />
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-2xl font-bold border-2 border-slate-300 rounded-lg focus:border-slate-400 focus:outline-none" />
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-2xl font-bold border-2 border-slate-300 rounded-lg focus:border-slate-400 focus:outline-none" />
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-2xl font-bold border-2 border-slate-300 rounded-lg focus:border-slate-400 focus:outline-none" />
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-2xl font-bold border-2 border-slate-300 rounded-lg focus:border-slate-400 focus:outline-none" />
                                        </div>
                                        <p class="text-slate-500 text-xs mb-4">לא קיבלת את הקוד? <a href="#" class="text-slate-600 hover:text-slate-700 font-medium">שלח שוב</a></p>
                                        <button class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-6 rounded-lg transition-all shadow-none">
                                            המשך
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Service Integration Example Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Service Integration Example - Fintech Onboarding</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-lg w-full">
                                        <div class="mb-6">
                                            <h5 class="text-slate-900 font-bold text-xl mb-2">Create Your Account</h5>
                                            <p class="text-slate-600 text-sm">Get started in seconds with bank-verified identity</p>
                                        </div>
                                        <div class="space-y-4 mb-6">
                                            <div>
                                                <label class="block text-slate-700 text-sm font-medium mb-2">Email Address</label>
                                                <input type="email" class="w-full border-2 border-slate-300 rounded-lg px-4 py-3 focus:border-slate-400 focus:outline-none" placeholder="you@example.com" />
                                            </div>
                                            <div>
                                                <label class="block text-slate-700 text-sm font-medium mb-2">Password</label>
                                                <input type="password" class="w-full border-2 border-slate-300 rounded-lg px-4 py-3 focus:border-slate-400 focus:outline-none" placeholder="••••••••" />
                                            </div>
                                        </div>
                                        <div class="relative mb-6">
                                            <div class="absolute inset-0 flex items-center">
                                                <div class="w-full border-t border-slate-300"></div>
                                            </div>
                                            <div class="relative flex justify-center text-sm">
                                                <span class="px-4 bg-white text-slate-500">Or verify identity instantly</span>
                                            </div>
                                        </div>
                                        <button class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 px-6 rounded-lg flex items-center justify-center gap-3 transition-all shadow-none mb-4">
                                            <div class="bg-white/20 rounded p-1">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                                    <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                                </svg>
                                            </div>
                                            <span>Verify Identity via Bank</span>
                                        </button>
                                        <p class="text-xs text-slate-500 text-center">By continuing, you agree to our Terms of Service</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Progress Indicator Mockup -->
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Multi-Step Progress Indicator</h4>
                                <div class="bg-slate-900 rounded-lg p-4 md:p-8 flex items-center justify-center mockup-container">
                                    <div class="bg-white rounded-lg p-6 md:p-8 shadow-xl max-w-md w-full">
                                        <div class="mb-8">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center gap-2">
                                                    <div class="w-8 h-8 rounded-full bg-slate-500 text-white flex items-center justify-center text-sm font-bold">1</div>
                                                    <span class="text-sm font-medium text-slate-900">Select Bank</span>
                                                </div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                                                </svg>
                                            </div>
                                            <div class="h-1 bg-slate-200 rounded-full mb-4">
                                                <div class="h-1 bg-slate-500 rounded-full" style="width: 33%"></div>
                                            </div>
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center gap-2">
                                                    <div class="w-8 h-8 rounded-full bg-slate-500 text-white flex items-center justify-center text-sm font-bold">2</div>
                                                    <span class="text-sm font-medium text-slate-900">Bank Login</span>
                                                </div>
                                                <div class="w-5 h-5 border-2 border-slate-300 rounded-full"></div>
                                            </div>
                                            <div class="h-1 bg-slate-200 rounded-full mb-4">
                                                <div class="h-1 bg-slate-200 rounded-full" style="width: 0%"></div>
                                            </div>
                                            <div class="flex items-center justify-between">
                                                <div class="flex items-center gap-2">
                                                    <div class="w-8 h-8 rounded-full bg-slate-200 text-slate-600 flex items-center justify-center text-sm font-bold">3</div>
                                                    <span class="text-sm font-medium text-slate-500">Verification</span>
                                                </div>
                                                <div class="w-5 h-5 border-2 border-slate-300 rounded-full"></div>
                                            </div>
                                        </div>
                                        <div class="bg-slate-50 rounded-lg p-4">
                                            <p class="text-sm text-slate-700">
                                                <strong class="text-slate-900">Current Step:</strong> Authenticate with your bank to continue
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Server Side -->
        <section id="server-side" class="py-24 px-4 sm:px-6 lg:px-8">
            <div class="max-w-5xl mx-auto">
                <div class="mb-12">
                    <span class="text-xs font-medium text-slate-500 uppercase tracking-wider mb-2 block">Backend</span>
                    <h2 class="text-2xl font-semibold mb-4 text-white">9. Server Side</h2>
                    <div class="w-8 h-px bg-slate-700 rounded-full shadow-3d"></div>
                </div>
                
                <div class="space-y-8">
                    <div class="text-slate-300 leading-relaxed">
                        <p>
                            The server-side platform serves as the core identity verification service, managing authentication flows, identity assertions, and API endpoints for digital services. Built with Node.js, Express.js, PostgreSQL, Prisma, Redis, and RabbitMQ, the server ensures security, scalability, and regulatory compliance.
                        </p>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Server Architecture</h3>
                        <p class="text-slate-300 mb-4">
                            The server-side platform is built on a microservices architecture, ensuring scalability, security, and regulatory compliance. The system integrates with OpenFinance.ai for bank connectivity and implements OAuth 2.0 / OpenID Connect standards. Microservices communicate via REST APIs for synchronous operations and RabbitMQ for asynchronous event-driven processing.
                        </p>
                        <ul class="space-y-3 text-slate-300 list-disc list-inside">
                            <li>RESTful API architecture for service integration</li>
                            <li>Microservices-based design for scalability and maintainability</li>
                            <li>RabbitMQ message queue for async inter-service communication</li>
                            <li>Redis for caching, token blacklisting, and rate limiting</li>
                            <li>PostgreSQL with Prisma ORM for data persistence</li>
                            <li>Secure token management and storage</li>
                            <li>Identity assertion generation and validation using JWT</li>
                            <li>Integration with OpenFinance.ai for bank connectivity</li>
                            <li>Comprehensive audit logging system for compliance</li>
                            <li>Data encryption at rest and in transit</li>
                            <li>Rate limiting and API security measures</li>
                        </ul>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Microservices & Modules</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-slate-900/50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-slate-200 mb-2">OAuth Authorization Server</h4>
                                <p class="text-slate-300 text-sm">Handles OAuth 2.0 and OpenID Connect flows, token issuance, and authorization management</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-slate-200 mb-2">Client Registry Service</h4>
                                <p class="text-slate-300 text-sm">Manages third-party platform registration, approval, and client credentials</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-slate-200 mb-2">Consent Orchestration Service</h4>
                                <p class="text-slate-300 text-sm">Orchestrates user consent flows, scope management, and consent revocation</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-slate-200 mb-2">OpenFinance.ai Integration Layer</h4>
                                <p class="text-slate-300 text-sm">Handles secure communication with banks via OpenFinance.ai API</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-slate-200 mb-2">Identity Assertion Engine</h4>
                                <p class="text-slate-300 text-sm">Generates and validates cryptographically signed identity assertions (JWT)</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-slate-200 mb-2">Audit & Compliance Module</h4>
                                <p class="text-slate-300 text-sm">Comprehensive logging, audit trails, and compliance reporting. Consumes audit events from RabbitMQ queues for async processing.</p>
                            </div>
                        </div>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Technology Stack</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <h4 class="text-lg font-semibold text-slate-200 mb-3">Core Technologies</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li><strong class="text-white">Runtime:</strong> Node.js 18+</li>
                                    <li><strong class="text-white">Framework:</strong> Express.js</li>
                                    <li><strong class="text-white">Database:</strong> PostgreSQL 15+</li>
                                    <li><strong class="text-white">ORM:</strong> Prisma</li>
                                    <li><strong class="text-white">Caching:</strong> Redis</li>
                                    <li><strong class="text-white">Message Queue:</strong> RabbitMQ</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-slate-200 mb-3">RabbitMQ Integration</h4>
                                <ul class="space-y-2 text-slate-300 text-sm">
                                    <li><strong class="text-white">Library:</strong> amqplib (Node.js RabbitMQ client)</li>
                                    <li><strong class="text-white">Patterns:</strong> Pub/Sub, Work Queues, Routing</li>
                                    <li><strong class="text-white">Queues:</strong> audit.events, token.revocation, bank.callbacks, notifications</li>
                                    <li><strong class="text-white">Features:</strong> Message acknowledgments, dead-letter queues, retry logic</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-medium text-slate-100 mb-4">9.1. API</h3>
                        <div class="space-y-6">
                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">OAuth 2.0 / OpenID Connect Endpoints</h4>
                                <div class="space-y-3 font-mono text-sm">
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/oauth/authorize</span>
                                        <p class="text-slate-400 mt-1">OAuth 2.0 authorization endpoint - initiates authentication flow</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">POST</span> <span class="text-white">/oauth/token</span>
                                        <p class="text-slate-400 mt-1">Token endpoint - exchanges authorization code for access/ID tokens</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/.well-known/openid-configuration</span>
                                        <p class="text-slate-400 mt-1">OpenID Connect discovery endpoint - provides configuration metadata</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/keys/jwks.json</span>
                                        <p class="text-slate-400 mt-1">JSON Web Key Set endpoint - provides public keys for token verification</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">POST</span> <span class="text-white">/v1/openfinance/oauth/callback</span>
                                        <p class="text-slate-400 mt-1">OpenFinance.ai OAuth callback handler - processes bank authentication responses</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Identity Verification Endpoints</h4>
                                <div class="space-y-3 font-mono text-sm">
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">POST</span> <span class="text-white">/api/v1/identity/verify</span>
                                        <p class="text-slate-400 mt-1">Request identity verification for a user</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/api/v1/identity/assertion/:id</span>
                                        <p class="text-slate-400 mt-1">Retrieve identity assertion by ID</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/api/v1/identity/status/:sessionId</span>
                                        <p class="text-slate-400 mt-1">Check verification status</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Service Management Endpoints</h4>
                                <div class="space-y-3 font-mono text-sm">
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">POST</span> <span class="text-white">/api/v1/services/register</span>
                                        <p class="text-slate-400 mt-1">Register a new digital service</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/api/v1/services/:serviceId/config</span>
                                        <p class="text-slate-400 mt-1">Get service configuration and API keys</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">Audit & Compliance Endpoints</h4>
                                <div class="space-y-3 font-mono text-sm">
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/api/v1/audit/logs</span>
                                        <p class="text-slate-400 mt-1">Retrieve audit logs (admin only)</p>
                                    </div>
                                    <div class="bg-slate-900/50 rounded p-3">
                                        <span class="text-sky-400">GET</span> <span class="text-white">/api/v1/compliance/report</span>
                                        <p class="text-slate-400 mt-1">Generate compliance reports</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card-3d rounded-lg p-6 shadow-3d">
                                <h4 class="text-xl font-semibold text-slate-400 mb-4">API Authentication</h4>
                                <p class="text-slate-300">
                                    All API endpoints require authentication using API keys or OAuth 2.0 client credentials. Services must register and obtain API credentials before accessing the platform.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- References -->
        <section id="references" class="py-20 px-4 sm:px-6 lg:px-8 bg-slate-800/30">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-4xl font-bold mb-8 text-white">10. References</h2>
                
                <div class="space-y-6">
                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Technologies & Standards</h3>
                        <ul class="space-y-2 text-slate-300">
                            <li><strong class="text-white">OAuth 2.0 (RFC 6749):</strong> Authorization framework for secure authentication flows</li>
                            <li><strong class="text-white">OpenID Connect Core 1.0:</strong> Identity layer on top of OAuth 2.0 for identity verification</li>
                            <li><strong class="text-white">JWT (RFC 7519):</strong> JSON Web Token format for identity assertions</li>
                            <li><strong class="text-white">JWS (RFC 7515):</strong> JSON Web Signature for cryptographically signed tokens</li>
                            <li><strong class="text-white">OpenFinance.ai:</strong> <a href="https://docs.open-finance.ai/" target="_blank" class="text-sky-400 hover:text-sky-300 underline">https://docs.open-finance.ai/</a> - Open Banking platform for bank connectivity</li>
                            <li><strong class="text-white">REST API:</strong> Architectural style for web services</li>
                            <li><strong class="text-white">Angular / React:</strong> Frontend frameworks for client-side development</li>
                            <li><strong class="text-white">.NET / Node.js / Python:</strong> Backend runtime environments</li>
                        </ul>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Regulatory & Compliance</h3>
                        <ul class="space-y-2 text-slate-300">
                            <li><strong class="text-white">KYC (Know Your Customer):</strong> Customer identification requirements</li>
                            <li><strong class="text-white">GDPR:</strong> European data protection regulation</li>
                            <li><strong class="text-white">Financial Regulation:</strong> Banking and financial services compliance</li>
                            <li><strong class="text-white">PSD2:</strong> Payment Services Directive (EU)</li>
                        </ul>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Related Products & Solutions</h3>
                        <ul class="space-y-2 text-slate-300">
                            <li><strong class="text-white">OpenFinance.ai:</strong> Open Banking platform providing secure bank connectivity and API integration</li>
                            <li><strong class="text-white">Open Banking Platforms:</strong> Existing financial data sharing solutions (focus on data, not identity)</li>
                            <li><strong class="text-white">Traditional KYC Providers:</strong> Document-based identity verification solutions</li>
                            <li><strong class="text-white">Social Login Providers:</strong> Google, Facebook authentication services (convenient but not suitable for regulated use cases)</li>
                            <li><strong class="text-white">Digital Identity Solutions:</strong> eIDAS, national ID systems</li>
                            <li><strong class="text-white">Banking APIs:</strong> Bank-provided API services</li>
                        </ul>
                    </div>

                    <div class="card-3d rounded-lg p-6 shadow-3d">
                        <h3 class="text-lg font-medium text-slate-100 mb-4">Security Standards</h3>
                        <ul class="space-y-2 text-slate-300">
                            <li><strong class="text-white">TLS/SSL:</strong> Transport layer security for encrypted communication</li>
                            <li><strong class="text-white">PKI (Public Key Infrastructure):</strong> Certificate-based security</li>
                            <li><strong class="text-white">Encryption:</strong> Data protection at rest and in transit</li>
                            <li><strong class="text-white">Audit Logging:</strong> Security event tracking and compliance</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-12 px-4 sm:px-6 lg:px-8 border-t border-slate-800 bg-slate-900">
            <div class="max-w-4xl mx-auto text-center">
                <div class="flex items-center justify-center gap-3 mb-4">
                    <div class="bg-gradient-to-br from-sky-400 to-emerald-400 w-8 h-8 rounded-lg flex items-center justify-center shadow-3d">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-900" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <span class="text-lg font-bold text-white">
                        Prov<span class="text-sky-400">ID</span>e
                    </span>
                </div>
                <p class="text-slate-400 text-sm mb-4">
                    Bank-Verified Digital Identity Platform
                </p>
                <p class="text-slate-500 text-xs">
                    Final Project - Computer Science - Fintech and Algorithmic Trading
                </p>
            </div>
        </footer>
    </main>

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when clicking a link
        const mobileLinks = mobileMenu.querySelectorAll('a');
        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Active navigation link highlighting
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-link');

        function highlightActiveSection() {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', highlightActiveSection);
        highlightActiveSection();

        // Initialize Mermaid with modern theme
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'dark',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'cardinal',
                padding: 30,
                nodeSpacing: 60,
                rankSpacing: 100,
                defaultRenderer: 'dagre-wrapper'
            },
            themeVariables: {
                primaryColor: '#0c4a6e',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#38bdf8',
                lineColor: '#64748b',
                secondaryColor: '#064e3b',
                tertiaryColor: '#78350f',
                background: 'transparent',
                mainBkgColor: '#0f172a',
                secondBkgColor: '#1e293b',
                textColor: '#f1f5f9',
                border1: '#475569',
                border2: '#64748b',
                noteBkgColor: '#1e293b',
                noteTextColor: '#f1f5f9',
                noteBorderColor: '#64748b',
                fontSize: '18px',
                fontFamily: 'Inter, sans-serif',
                edgeLabelBackground: '#1e293b',
                clusterBkg: '#0f172a',
                clusterBorder: '#475569',
                defaultLinkColor: '#64748b',
                titleColor: '#f1f5f9'
            }
        });

        // Auto-resize diagram container to fit actual diagram size
        function resizeDiagramContainer() {
            const diagramElement = document.getElementById('mermaid-diagram');
            const diagramContainer = document.getElementById('diagram-container');
            const diagramWrapper = document.getElementById('diagram-wrapper');
            
            if (diagramElement && diagramContainer && diagramWrapper) {
                // Wait for Mermaid to render
                const checkSVG = setInterval(() => {
                    const svg = diagramElement.querySelector('svg');
                    if (svg) {
                        clearInterval(checkSVG);
                        // Get the actual SVG dimensions
                        const svgHeight = svg.getBoundingClientRect().height || svg.viewBox.baseVal.height;
                        const svgWidth = svg.getBoundingClientRect().width || svg.viewBox.baseVal.width;
                        
                        if (svgHeight > 0) {
                            // Set container height to fit SVG + padding
                            const padding = 64; // 32px top + 32px bottom (p-8 = 2rem = 32px)
                            const newHeight = svgHeight + padding;
                            diagramContainer.style.height = `${newHeight}px`;
                            diagramWrapper.style.height = `${newHeight}px`;
                        }
                    }
                }, 100);
                
                // Stop checking after 5 seconds
                setTimeout(() => clearInterval(checkSVG), 5000);
            }
        }

        // Resize after page load and when window resizes
        window.addEventListener('load', () => {
            setTimeout(resizeDiagramContainer, 500);
        });
        
        window.addEventListener('resize', () => {
            setTimeout(resizeDiagramContainer, 100);
        });

        // Diagram Zoom and Pan Functionality
        let zoomLevel = 1;
        const minZoom = 0.5;
        const maxZoom = 3;
        const zoomStep = 0.2;
        let isPanning = false;
        let startX, startY, scrollLeft, scrollTop;

        const diagramElement = document.getElementById('mermaid-diagram');
        const diagramWrapper = document.getElementById('diagram-wrapper');
        const fullscreenDiagram = document.getElementById('fullscreen-diagram');
        const fullscreenWrapper = document.getElementById('fullscreen-wrapper');
        const fullscreenModal = document.getElementById('fullscreen-modal');

        let fsZoomLevel = 1;
        let fsPanX = 0;
        let fsPanY = 0;

        // Zoom functions for normal view
        function applyZoom(element, level) {
            element.style.transform = `scale(${level})`;
            zoomLevel = level;
        }

        // Fullscreen zoom and pan with transform
        function applyFSZoom(element, level, centerX = null, centerY = null) {
            if (centerX !== null && centerY !== null) {
                // Zoom centered on mouse position
                const rect = fullscreenWrapper.getBoundingClientRect();
                const x = centerX - rect.left;
                const y = centerY - rect.top;
                
                // Calculate the point in diagram coordinates before zoom
                const diagramX = (x - fsPanX) / fsZoomLevel;
                const diagramY = (y - fsPanY) / fsZoomLevel;
                
                // Apply new zoom
                fsZoomLevel = level;
                
                // Adjust pan to keep the same point under the mouse
                fsPanX = x - diagramX * fsZoomLevel;
                fsPanY = y - diagramY * fsZoomLevel;
            } else {
                // Simple zoom without centering
            fsZoomLevel = level;
            }
            
            // Apply combined transform
            element.style.transform = `translate(${fsPanX}px, ${fsPanY}px) scale(${fsZoomLevel})`;
        }

        // Zoom In
        document.getElementById('zoom-in-btn').addEventListener('click', () => {
            if (zoomLevel < maxZoom) {
                applyZoom(diagramElement, Math.min(zoomLevel + zoomStep, maxZoom));
            }
        });

        // Zoom Out
        document.getElementById('zoom-out-btn').addEventListener('click', () => {
            if (zoomLevel > minZoom) {
                applyZoom(diagramElement, Math.max(zoomLevel - zoomStep, minZoom));
            }
        });

        // Reset Zoom
        document.getElementById('zoom-reset-btn').addEventListener('click', () => {
            applyZoom(diagramElement, 1);
            diagramWrapper.scrollLeft = 0;
            diagramWrapper.scrollTop = 0;
        });

        // Fullscreen Zoom In (centered on wrapper center)
        document.getElementById('fs-zoom-in-btn').addEventListener('click', () => {
            if (fsZoomLevel < maxZoom) {
                const rect = fullscreenWrapper.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                applyFSZoom(fullscreenDiagram, Math.min(fsZoomLevel + zoomStep, maxZoom), centerX, centerY);
            }
        });

        // Fullscreen Zoom Out (centered on wrapper center)
        document.getElementById('fs-zoom-out-btn').addEventListener('click', () => {
            if (fsZoomLevel > minZoom) {
                const rect = fullscreenWrapper.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                applyFSZoom(fullscreenDiagram, Math.max(fsZoomLevel - zoomStep, minZoom), centerX, centerY);
            }
        });

        // Fullscreen Reset Zoom
        document.getElementById('fs-zoom-reset-btn').addEventListener('click', () => {
            fsPanX = 0;
            fsPanY = 0;
            fsZoomLevel = 1;
            fullscreenDiagram.style.transform = `translate(0px, 0px) scale(1)`;
        });

        // Mouse wheel zoom
        diagramWrapper.addEventListener('wheel', (e) => {
            if (e.ctrlKey || e.metaKey) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -zoomStep : zoomStep;
                const newZoom = Math.max(minZoom, Math.min(maxZoom, zoomLevel + delta));
                applyZoom(diagramElement, newZoom);
            }
        });

        // Fullscreen mouse wheel zoom (industry standard - works without modifier keys)
        fullscreenWrapper.addEventListener('wheel', (e) => {
                e.preventDefault();
                // Reduced sensitivity to 25% for smoother, more controlled zooming
                const delta = e.deltaY > 0 ? -zoomStep * 0.25 : zoomStep * 0.25;
                const newZoom = Math.max(minZoom, Math.min(maxZoom, fsZoomLevel + delta));
            // Zoom centered on mouse position
            applyFSZoom(fullscreenDiagram, newZoom, e.clientX, e.clientY);
        }, { passive: false });

        // Pan functionality (drag to pan) - for normal view (scroll-based)
        function startPan(e, wrapper) {
            isPanning = true;
            wrapper.style.cursor = 'grabbing';
            startX = e.pageX - wrapper.offsetLeft;
            startY = e.pageY - wrapper.offsetTop;
            scrollLeft = wrapper.scrollLeft;
            scrollTop = wrapper.scrollTop;
        }

        function doPan(e, wrapper) {
            if (!isPanning) return;
            e.preventDefault();
            const x = e.pageX - wrapper.offsetLeft;
            const y = e.pageY - wrapper.offsetTop;
            const walkX = (x - startX) * 2;
            const walkY = (y - startY) * 2;
            wrapper.scrollLeft = scrollLeft - walkX;
            wrapper.scrollTop = scrollTop - walkY;
        }

        function stopPan(wrapper) {
            isPanning = false;
            wrapper.style.cursor = 'grab';
        }

        // Normal view pan
        diagramWrapper.addEventListener('mousedown', (e) => {
            // Only pan if not clicking on buttons or interactive elements
            if (e.target.closest('button') || e.target.closest('a')) return;
            startPan(e, diagramWrapper);
        });
        diagramWrapper.addEventListener('mousemove', (e) => doPan(e, diagramWrapper));
        diagramWrapper.addEventListener('mouseup', () => stopPan(diagramWrapper));
        diagramWrapper.addEventListener('mouseleave', () => stopPan(diagramWrapper));

        // Fullscreen view pan (transform-based, map-style)
        let isFSPanning = false;
        let fsStartX, fsStartY, fsStartPanX, fsStartPanY;

        function startFSPan(e) {
            // Only pan if not clicking on buttons or interactive elements
            if (e.target.closest('button') || e.target.closest('a')) return;
            isFSPanning = true;
            fullscreenWrapper.style.cursor = 'grabbing';
            fsStartX = e.clientX;
            fsStartY = e.clientY;
            fsStartPanX = fsPanX;
            fsStartPanY = fsPanY;
        }

        function doFSPan(e) {
            if (!isFSPanning) return;
            e.preventDefault();
            const deltaX = e.clientX - fsStartX;
            const deltaY = e.clientY - fsStartY;
            fsPanX = fsStartPanX + deltaX;
            fsPanY = fsStartPanY + deltaY;
            fullscreenDiagram.style.transform = `translate(${fsPanX}px, ${fsPanY}px) scale(${fsZoomLevel})`;
        }

        function stopFSPan() {
            isFSPanning = false;
            fullscreenWrapper.style.cursor = 'grab';
        }

        fullscreenWrapper.addEventListener('mousedown', startFSPan);
        fullscreenWrapper.addEventListener('mousemove', doFSPan);
        fullscreenWrapper.addEventListener('mouseup', stopFSPan);
        fullscreenWrapper.addEventListener('mouseleave', stopFSPan);

        // Touch support for mobile - normal view
        let touchStartX, touchStartY, touchScrollLeft, touchScrollTop;

        function startTouchPan(e, wrapper) {
            const touch = e.touches[0];
            touchStartX = touch.pageX - wrapper.offsetLeft;
            touchStartY = touch.pageY - wrapper.offsetTop;
            touchScrollLeft = wrapper.scrollLeft;
            touchScrollTop = wrapper.scrollTop;
        }

        function doTouchPan(e, wrapper) {
            if (!e.touches[0]) return;
            const touch = e.touches[0];
            const x = touch.pageX - wrapper.offsetLeft;
            const y = touch.pageY - wrapper.offsetTop;
            const walkX = (x - touchStartX) * 2;
            const walkY = (y - touchStartY) * 2;
            wrapper.scrollLeft = touchScrollLeft - walkX;
            wrapper.scrollTop = touchScrollTop - walkY;
        }

        diagramWrapper.addEventListener('touchstart', (e) => startTouchPan(e, diagramWrapper));
        diagramWrapper.addEventListener('touchmove', (e) => doTouchPan(e, diagramWrapper));

        // Touch support for fullscreen (transform-based)
        let fsTouchStartX, fsTouchStartY, fsTouchStartPanX, fsTouchStartPanY;
        let isFSTouching = false;

        function startFSTouchPan(e) {
            if (e.touches.length === 1) {
                isFSTouching = true;
                const touch = e.touches[0];
                fsTouchStartX = touch.clientX;
                fsTouchStartY = touch.clientY;
                fsTouchStartPanX = fsPanX;
                fsTouchStartPanY = fsPanY;
            }
        }

        function doFSTouchPan(e) {
            if (!isFSTouching || e.touches.length !== 1) return;
            e.preventDefault();
            const touch = e.touches[0];
            const deltaX = touch.clientX - fsTouchStartX;
            const deltaY = touch.clientY - fsTouchStartY;
            fsPanX = fsTouchStartPanX + deltaX;
            fsPanY = fsTouchStartPanY + deltaY;
            fullscreenDiagram.style.transform = `translate(${fsPanX}px, ${fsPanY}px) scale(${fsZoomLevel})`;
        }

        function stopFSTouchPan() {
            isFSTouching = false;
        }

        fullscreenWrapper.addEventListener('touchstart', startFSTouchPan, { passive: false });
        fullscreenWrapper.addEventListener('touchmove', doFSTouchPan, { passive: false });
        fullscreenWrapper.addEventListener('touchend', stopFSTouchPan);
        fullscreenWrapper.addEventListener('touchcancel', stopFSTouchPan);

        // Fullscreen functionality
        document.getElementById('fullscreen-btn').addEventListener('click', () => {
            fullscreenModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            // Reset pan and zoom when opening
            fsPanX = 0;
            fsPanY = 0;
            fsZoomLevel = 1;
            // Copy the rendered diagram from main view to fullscreen
            setTimeout(() => {
                const mainDiagram = document.getElementById('mermaid-diagram');
                const fsDiagram = document.getElementById('fullscreen-diagram');
                
                if (mainDiagram && fsDiagram) {
                    // Find the rendered SVG in the main diagram
                    const mainSvg = mainDiagram.querySelector('svg');
                    if (mainSvg) {
                        // Clone the SVG and its styles
                        const clonedSvg = mainSvg.cloneNode(true);
                        // Clear the fullscreen diagram and add the cloned SVG
                        fsDiagram.innerHTML = '';
                        fsDiagram.appendChild(clonedSvg);
                        // Remove max-width constraint and ensure proper sizing
                        clonedSvg.style.maxWidth = 'none';
                        clonedSvg.style.width = '100%';
                        clonedSvg.style.height = 'auto';
                        clonedSvg.style.display = 'block';
                        // Ensure the SVG viewBox allows proper scaling
                        if (clonedSvg.hasAttribute('viewBox')) {
                            // Keep the original viewBox but ensure it scales properly
                            clonedSvg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
                        }
                        // Reset transform
                        fullscreenDiagram.style.transform = `translate(0px, 0px) scale(1)`;
                    } else {
                        // If SVG not found, try to render it fresh
                        // Get the mermaid code from the main diagram (before it was rendered)
                        const mermaidCode = mainDiagram.getAttribute('data-processed') 
                            ? mainDiagram.textContent 
                            : (mainDiagram.textContent || mainDiagram.innerText);
                        if (mermaidCode && mermaidCode.trim()) {
                            fsDiagram.textContent = mermaidCode;
                            fsDiagram.classList.add('mermaid');
                            mermaid.init(undefined, fsDiagram).then(() => {
                                const renderedSvg = fsDiagram.querySelector('svg');
                                if (renderedSvg) {
                                    renderedSvg.style.maxWidth = 'none';
                                    renderedSvg.style.width = '100%';
                                    renderedSvg.style.height = 'auto';
                                }
                                // Reset transform
                                fullscreenDiagram.style.transform = `translate(0px, 0px) scale(1)`;
                            });
                        }
                    }
                }
            }, 100);
        });

        document.getElementById('exit-fullscreen-btn').addEventListener('click', () => {
            fullscreenModal.classList.add('hidden');
            document.body.style.overflow = '';
            // Reset pan and zoom
            fsPanX = 0;
            fsPanY = 0;
            fsZoomLevel = 1;
            fullscreenDiagram.style.transform = `translate(0px, 0px) scale(1)`;
        });

        // Exit fullscreen on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !fullscreenModal.classList.contains('hidden')) {
                fullscreenModal.classList.add('hidden');
                document.body.style.overflow = '';
                // Reset pan and zoom
                fsPanX = 0;
                fsPanY = 0;
                fsZoomLevel = 1;
                fullscreenDiagram.style.transform = `translate(0px, 0px) scale(1)`;
            }
        });
    </script>
</body>
</html>
